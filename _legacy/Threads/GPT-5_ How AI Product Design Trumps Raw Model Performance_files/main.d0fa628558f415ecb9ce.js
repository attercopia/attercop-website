/*! For license information please see main.d0fa628558f415ecb9ce.js.LICENSE.txt */
(()=>{var e,t,n={514:(e,t,n)=>{"use strict";var r=n(284);function o(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(756),u=n.n(c);const l=({hardwareOnly:e=!1,enableWebgl:t=!1,enableScreen:n=!0,debug:r=!1,raw:o=!1}={})=>{const{cookieEnabled:i,deviceMemory:a,doNotTrack:s,hardwareConcurrency:c,language:u,languages:l,maxTouchPoints:g,platform:y,userAgent:b,vendor:m}=window.navigator,{width:v,height:w,colorDepth:S,pixelDepth:_}=n?window.screen:{},I=(new Date).getTimezoneOffset(),E=Intl.DateTimeFormat().resolvedOptions().timeZone,k="ontouchstart"in window,C=n?window.devicePixelRatio:void 0,A=n?d(r):void 0,O=t?h(r):void 0,T=t?p(r):void 0,x=e?JSON.stringify({canvas:A,colorDepth:S,deviceMemory:a,devicePixelRatio:C,hardwareConcurrency:c,height:w,maxTouchPoints:g,pixelDepth:_,platform:y,touchSupport:k,webgl:O,webglInfo:T,width:v}):JSON.stringify({canvas:A,colorDepth:S,cookieEnabled:i,deviceMemory:a,devicePixelRatio:C,doNotTrack:s,hardwareConcurrency:c,height:w,language:u,languages:l,maxTouchPoints:g,pixelDepth:_,platform:y,timezone:E,timezoneOffset:I,touchSupport:k,userAgent:b,vendor:m,webgl:O,webglInfo:T,width:v}),P=JSON.stringify(x,null,4);return r&&console.log("fingerprint data",P),o?P:f(P)},d=e=>{try{const t=document.createElement("canvas"),n=t.getContext("2d"),r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?";n.textBaseline="top",n.font="14px 'Arial'",n.textBaseline="alphabetic",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText(r,2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(r,4,17);const o=t.toDataURL();return e?document.body.appendChild(t):n.clearRect(0,0,t.width,t.height),f(o)}catch{return null}},h=e=>{try{const t=document.createElement("canvas"),n=t.getContext("webgl");t.width=256,t.height=128;const r="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",o="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,i);const a=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.7321,0]);n.bufferData(n.ARRAY_BUFFER,a,n.STATIC_DRAW),i.itemSize=3,i.numItems=3;const s=n.createProgram(),c=n.createShader(n.VERTEX_SHADER);n.shaderSource(c,r),n.compileShader(c);const u=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(u,o),n.compileShader(u),n.attachShader(s,c),n.attachShader(s,u),n.linkProgram(s),n.useProgram(s),s.vertexPosAttrib=n.getAttribLocation(s,"attrVertex"),s.offsetUniform=n.getUniformLocation(s,"uniformOffset"),n.enableVertexAttribArray(s.vertexPosArray),n.vertexAttribPointer(s.vertexPosAttrib,i.itemSize,n.FLOAT,!1,0,0),n.uniform2f(s.offsetUniform,1,1),n.drawArrays(n.TRIANGLE_STRIP,0,i.numItems);const l=new Uint8Array(t.width*t.height*4);n.readPixels(0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,l);const d=JSON.stringify(l).replace(/,?"[0-9]+":/g,"");return e?document.body.appendChild(t):n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT),f(d)}catch{return null}},p=()=>{try{const e=document.createElement("canvas").getContext("webgl");return{VERSION:String(e.getParameter(e.VERSION)),SHADING_LANGUAGE_VERSION:String(e.getParameter(e.SHADING_LANGUAGE_VERSION)),VENDOR:String(e.getParameter(e.VENDOR)),SUPORTED_EXTENSIONS:String(e.getSupportedExtensions())}}catch{return null}},f=e=>{const t=3&e.length,n=e.length-t,r=3432918353,o=461845907;let i,a,s;for(let t=0;t<n;t++)s=255&e.charCodeAt(t)|(255&e.charCodeAt(++t))<<8|(255&e.charCodeAt(++t))<<16|(255&e.charCodeAt(++t))<<24,++t,s=(65535&s)*r+(((s>>>16)*r&65535)<<16)&4294967295,s=s<<15|s>>>17,s=(65535&s)*o+(((s>>>16)*o&65535)<<16)&4294967295,i^=s,i=i<<13|i>>>19,a=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&a)+((58964+(a>>>16)&65535)<<16);const c=n-1;switch(s=0,t){case 3:s^=(255&e.charCodeAt(c+2))<<16;break;case 2:s^=(255&e.charCodeAt(c+1))<<8;break;case 1:s^=255&e.charCodeAt(c)}return s=(65535&s)*r+(((s>>>16)*r&65535)<<16)&4294967295,s=s<<15|s>>>17,s=(65535&s)*o+(((s>>>16)*o&65535)<<16)&4294967295,i^=s,i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0};"undefined"!=typeof window&&(window.getBrowserFingerprint=l);const g=l;n(211);var y=!0,b=!1,m=[],v="",w=document.body,S={childList:!0,subtree:!0},_=!1;const I={zest_secure_ui:function(e){if(e!=b){if(e){if(""==v)return;for(var t=document.querySelectorAll(v),n=0;n<t.length;n++){var r=t[n];r.classList.add("zest-hidden-font-9376ffa4ce"),m.push(r)}}else{for(n=0;n<m.length;n++)m[n].classList.remove("zest-hidden-font-9376ffa4ce");m=[]}(b=e)&&(_||(_=!0,new MutationObserver((function(e,t){y||(_=!1,t.disconnect()),b&&e.forEach((function(e){e.addedNodes.forEach((function(e){if(1==e.nodeType)for(var t=e.querySelectorAll(v),n=0;n<t.length;n++)t[n].classList.add("zest-hidden-font-9376ffa4ce"),m.push(t[n])}))}))})).observe(w,S)))}},initialize:function(e,t){y=e,v=t},is_secured:function(){return b}};var E=n(848);function k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var C,A=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=k({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=t.read(a,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",k({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,k({},this.attributes,t))},withConverter:function(t){return e(k({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class O{constructor(e={}){const{path:t,domain:n,expires:r,sameSite:o,secure:i}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?r:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||i,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===o&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(e,t){A.set(e,t,this.getData())}async getItem(e){return A.get(e)??null}async removeItem(e){A.remove(e,this.getData())}async clear(){const e=A.get(),t=Object.keys(e).map((e=>this.removeItem(e)));await Promise.all(t)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"}(C||(C={}));class T extends Error{constructor({message:e,name:t,recoverySuggestion:n,underlyingError:r,metadata:o}){if(super(e),this.name=t,this.underlyingError=r,this.recoverySuggestion=n,o){const{extendedRequestId:e,httpStatusCode:t,requestId:n}=o;this.metadata={extendedRequestId:e,httpStatusCode:t,requestId:n}}this.constructor=T,Object.setPrototypeOf(this,T.prototype)}}class x extends T{constructor(){super({name:C.PlatformNotSupported,message:"Function not supported on current platform"})}}class P{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new x;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new x;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new x;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new x;this.storage.clear()}}const N="x-amz-user-agent";var R;!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(R||(R={}));const D={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class L{constructor(e,t=R.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let n=this.level;if(L.LOG_LEVEL&&(n=L.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL),!(D[e]>=D[n]))return;let r=console.log.bind(console);e===R.ERROR&&console.error&&(r=console.error.bind(console)),e===R.WARN&&console.warn&&(r=console.warn.bind(console)),L.BIND_ALL_LOG_LEVELS&&(e===R.INFO&&console.info&&(r=console.info.bind(console)),e===R.DEBUG&&console.debug&&(r=console.debug.bind(console)));const o=`[${e}] ${this._ts()} ${this.name}`;let i="";if(1===t.length&&"string"==typeof t[0])i=`${o} - ${t[0]}`,r(i);else if(1===t.length)i=`${o} ${t[0]}`,r(o,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),i=`${o} - ${t[0]} ${e}`,r(`${o} - ${t[0]}`,e)}else i=`${o} ${t}`,r(o,t);for(const e of this._pluggables){const t={message:i,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(R.INFO,...e)}info(...e){this._log(R.INFO,...e)}warn(...e){this._log(R.WARN,...e)}error(...e){this._log(R.ERROR,...e)}debug(...e){this._log(R.DEBUG,...e)}verbose(...e){this._log(R.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}L.LOG_LEVEL=null,L.BIND_ALL_LOG_LEVELS=!1;class M{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const U=new L("CoreStorageUtils"),j=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(e){return U.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new M}};class K{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new x;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}const G=new class extends P{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){U.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new M})())}},$=(new class extends P{constructor(){super(j())}},new class extends K{constructor(){super(j())}},new P(new M),"undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default"),B=new L("Hub");class F{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const n=this.listeners.get(e);n?this.listeners.set(e,[...n.filter((({callback:e})=>e!==t))]):B.warn(`No listeners for ${e}`)}dispatch(e,t,n,r){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&(r===$||B.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const o={channel:e,payload:{...t},source:n,patternInfo:[]};try{this._toListeners(o)}catch(e){B.error(e)}}listen(e,t,n="noname"){let r;if("function"!=typeof t)throw new T({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});r=t;let o=this.listeners.get(e);return o||(o=[],this.listeners.set(e,o)),o.push({name:n,callback:r}),()=>{this._remove(e,r)}}_toListeners(e){const{channel:t,payload:n}=e,r=this.listeners.get(t);r&&r.forEach((r=>{B.debug(`Dispatching to ${t} with `,n);try{r.callback(e)}catch(e){B.error(e)}}))}}const V=new F("__default__"),W=(new F("internal-hub"),e=>{const t=Reflect.ownKeys(e);for(const n of t){const t=e[n];(t&&"object"==typeof t||"function"==typeof t)&&W(t)}return Object.freeze(e)}),q=Symbol("oauth-listener"),z=new L("parseAWSExports"),H={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},J=e=>e?.split(",")??[],X=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:o})=>({domain:e,scopes:t,redirectSignIn:J(n),redirectSignOut:J(r),responseType:o}),Q=e=>e.map((e=>{const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}));const Y={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function Z(e){return Y[e]}const ee={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function te(e=[]){return e.reduce(((e,t)=>(void 0!==ee[t]&&e.push(ee[t]),e)),[])}function ne(e){const t={};return e.forEach((({name:e,bucket_name:n,aws_region:r,paths:o})=>{if(e in t)throw new Error(`Duplicate friendly name found: ${e}. Name must be unique.`);const i=o?Object.entries(o).reduce(((e,[t,n])=>(void 0!==n&&(e[t]=n),e)),{}):void 0;t[e]={bucketName:n,region:r,paths:i}})),t}const re=e=>Object.keys(e).some((e=>e.startsWith("aws_")))?((e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new T({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:o,aws_bots_config:i,aws_cognito_identity_pool_id:a,aws_cognito_sign_up_verification_method:s,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:u,aws_cognito_password_protection_settings:l,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:h,aws_cognito_social_providers:p,aws_cognito_username_attributes:f,aws_mandatory_sign_in:g,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:b,aws_user_files_s3_bucket:m,aws_user_files_s3_bucket_region:v,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:w,aws_user_pools_id:S,aws_user_pools_web_client_id:_,geo:I,oauth:E,predictions:k,aws_cloud_logic_custom:C,Notifications:A,modelIntrospection:O}=e,x={};y&&(x.Analytics={Pinpoint:{appId:y,region:b}});const{InAppMessaging:P,Push:N}=A??{};if(P?.AWSPinpoint||N?.AWSPinpoint){if(P?.AWSPinpoint){const{appId:e,region:t}=P.AWSPinpoint;x.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(N?.AWSPinpoint){const{appId:e,region:t}=N.AWSPinpoint;x.Notifications={...x.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(i)&&(x.Interactions={LexV1:Object.fromEntries(i.map((e=>[e.name,e])))}),r){const e=H[n];e||z.debug(`Invalid authentication type ${n}. Falling back to IAM.`),x.API={GraphQL:{endpoint:r,apiKey:t,region:o,defaultAuthMode:e??"iam"}},O&&(x.API.GraphQL.modelIntrospection=O)}const R=c?{status:c&&c.toLowerCase(),totpEnabled:u?.includes("TOTP")??!1,smsEnabled:u?.includes("SMS")??!1}:void 0,D=l?{minLength:l.passwordPolicyMinLength,requireLowercase:l.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:l.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:l.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:l.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,L=Array.from(new Set([...d??[],...h??[]])).reduce(((e,t)=>({...e,[t.toLowerCase()]:{required:!0}})),{}),M=f?.includes("EMAIL")??!1,U=f?.includes("PHONE_NUMBER")??!1;(a||S)&&(x.Auth={Cognito:{identityPoolId:a,allowGuestAccess:"enable"!==g,signUpVerificationMethod:s,userAttributes:L,userPoolClientId:_,userPoolId:S,mfa:R,passwordFormat:D,loginWith:{username:!(M||U),email:M,phone:U}}});const j=!!E&&Object.keys(E).length>0,K=!!p&&p.length>0;if(x.Auth&&j&&(x.Auth.Cognito.loginWith={...x.Auth.Cognito.loginWith,oauth:{...X(E),...K&&{providers:Q(p)}}}),m&&(x.Storage={S3:{bucket:m,region:v,dangerouslyConnectToHttpEndpointForTesting:w}}),I){const{amazon_location_service:e}=I;x.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(C&&(x.API={...x.API,REST:C.reduce(((e,t)=>{const{name:n,endpoint:r,region:o,service:i}=t;return{...e,[n]:{endpoint:r,...i?{service:i}:void 0,...o?{region:o}:void 0}}}),{})}),k){const{VoiceId:e}=k?.convert?.speechGenerator?.defaults??{};x.Predictions=e?{...k,convert:{...k.convert,speechGenerator:{...k.convert.speechGenerator,defaults:{voiceId:e}}}}:k}return x})(e):function(e){const{version:t}=e;return!!t&&t.startsWith("1")}(e)?function(e){const t={};if(e.storage&&(t.Storage=function(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&ne(r)}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:o,mfa_configuration:i,mfa_methods:a,unauthenticated_identities_enabled:s,oauth:c,username_attributes:u,standard_required_attributes:l,groups:d}=e,h={Cognito:{userPoolId:t,userPoolClientId:n,groups:d}};return r&&(h.Cognito={...h.Cognito,identityPoolId:r}),o&&(h.Cognito.passwordFormat={requireLowercase:o.require_lowercase,requireNumbers:o.require_numbers,requireUppercase:o.require_uppercase,requireSpecialCharacters:o.require_symbols,minLength:o.min_length??6}),i&&(h.Cognito.mfa={status:(p=i,"OPTIONAL"===p?"optional":"REQUIRED"===p?"on":"off"),smsEnabled:a?.includes("SMS"),totpEnabled:a?.includes("TOTP")}),s&&(h.Cognito.allowGuestAccess=s),c&&(h.Cognito.loginWith={oauth:{domain:c.domain,redirectSignIn:c.redirect_sign_in_uri,redirectSignOut:c.redirect_sign_out_uri,responseType:"token"===c.response_type?"token":"code",scopes:c.scopes,providers:te(c.identity_providers)}}),u&&(h.Cognito.loginWith={...h.Cognito.loginWith,email:u.includes("email"),phone:u.includes("phone_number"),username:u.includes("username")}),l&&(h.Cognito.userAttributes=l.reduce(((e,t)=>({...e,[t]:{required:!0}})),{})),h;var p}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:r,search_indices:o}=e;return{LocationService:{region:t,searchIndices:o,geofenceCollections:n,maps:r}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:r,api_key:o,model_introspection:i}=e;return{GraphQL:{endpoint:r,defaultAuthMode:Z(n),region:t,apiKey:o,modelIntrospection:i}}}(e.data)),e.custom){const n=function(e){if(!e?.events)return;const{url:t,aws_region:n,api_key:r,default_authorization_type:o}=e.events;return{Events:{endpoint:t,defaultAuthMode:Z(o),region:n,apiKey:r}}}(e.custom);n&&"Events"in n&&(t.API={...t.API,...n})}return e.notifications&&(t.Notifications=function(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,o=n.includes("IN_APP_MESSAGING"),i=n.includes("APNS")||n.includes("FCM");if(!o&&!i)return;const a={};return o&&(a.InAppMessaging={Pinpoint:{appId:r,region:t}}),i&&(a.PushNotification={Pinpoint:{appId:r,region:t}}),a}(e.notifications)),t}(e):e;var oe=function(e,t){return oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},oe(e,t)};function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}oe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ae(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function se(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function ce(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function le(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function de(e){return this instanceof de?(this.v=e,this):new de(e)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var he=64,pe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fe=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ge=Math.pow(2,53)-1,ye=function(){function e(){this.state=Int32Array.from(fe),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>ge)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===he&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%he>=56){for(var r=this.bufferLength;r<he;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<56;r++)t.setUint8(r,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var o=new Uint8Array(32);for(r=0;r<8;r++)o[4*r]=this.state[r]>>>24&255,o[4*r+1]=this.state[r]>>>16&255,o[4*r+2]=this.state[r]>>>8&255,o[4*r+3]=this.state[r]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],u=t[7],l=0;l<he;l++){if(l<16)this.temp[l]=(255&e[4*l])<<24|(255&e[4*l+1])<<16|(255&e[4*l+2])<<8|255&e[4*l+3];else{var d=this.temp[l-2],h=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,p=((d=this.temp[l-15])>>>7|d<<25)^(d>>>18|d<<14)^d>>>3;this.temp[l]=(h+this.temp[l-7]|0)+(p+this.temp[l-16]|0)}var f=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&s^~a&c)|0)+(u+(pe[l]+this.temp[l]|0)|0)|0,g=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&o^r&o)|0;u=c,c=s,s=a,a=i+f|0,i=o,o=r,r=n,n=f+g|0}t[0]+=n,t[1]+=r,t[2]+=o,t[3]+=i,t[4]+=a,t[5]+=s,t[6]+=c,t[7]+=u},e}(),be="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function me(e){return e instanceof Uint8Array?e:"string"==typeof e?be(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var ve=function(){function e(e){this.secret=e,this.hash=new ye,this.reset()}return e.prototype.update=function(e){var t;if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(me(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return ae(this,void 0,void 0,(function(){return se(this,(function(e){return[2,this.digestSync()]}))}))},e.prototype.reset=function(){if(this.hash=new ye,this.secret){this.outer=new ye;var e=function(e){var t=me(e);if(t.byteLength>he){var n=new ye;n.update(t),t=n.digest()}var r=new Uint8Array(he);return r.set(t),r}(this.secret),t=new Uint8Array(he);t.set(e);for(var n=0;n<he;n++)e[n]^=54,t[n]^=92;for(this.hash.update(e),this.outer.update(t),n=0;n<e.byteLength;n++)e[n]=0}},e}();const we={},Se={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),we[e]=t,Se[t]=e}const _e=new L("Auth");class Ie{configure(e,t){this.authConfig=e,this.authOptions=t,e&&e.Cognito?.userPoolEndpoint&&_e.warn(Ee("Amazon Cognito User Pool")),e&&e.Cognito?.identityPoolEndpoint&&_e.warn(Ee("Amazon Cognito Identity Pool"))}async fetchAuthSession(e={}){let t,n;const r=await this.getTokens(e);return r?(n=r.accessToken?.payload?.sub,t=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:r,authenticated:!0,forceRefresh:e.forceRefresh}))):t=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:r,credentials:t?.credentials,identityId:t?.identityId,userSub:n}}async clearCredentials(){await(this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId())}async getTokens(e){return await(this.authOptions?.tokenProvider?.getTokens(e))??void 0}}const Ee=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`,ke=new class{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Ie}configure(e,t){const n=re(e);this.resourcesConfig=n,t&&(this.libraryOptions=t),this.resourcesConfig=W(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),V.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",$),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[q](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}};var Ce,Ae,Oe,Te,xe,Pe,Ne,Re,De,Le,Me,Ue,je,Ke;!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(Ce||(Ce={})),function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(Ae||(Ae={})),function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"}(Oe||(Oe={})),function(e){e.Record="1",e.IdentifyUser="2"}(Te||(Te={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(xe||(xe={})),function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"}(Pe||(Pe={})),function(e){e.Subscribe="1",e.GraphQl="2"}(Ne||(Ne={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(Re||(Re={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(De||(De={})),function(e){e.None="0"}(Le||(Le={})),function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(Me||(Me={})),function(e){e.Subscribe="1"}(Ue||(Ue={})),function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(je||(je={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"}(Ke||(Ke={}));const Ge="6.15.6",$e=()=>"undefined"!=typeof global,Be=()=>"undefined"!=typeof window,Fe=()=>"undefined"!=typeof document,Ve=()=>"undefined"!=typeof process,We=(e,t)=>!!Object.keys(e).find((e=>e.startsWith(t))),qe=[{platform:Ce.Expo,detectionMethod:function(){return $e()&&void 0!==global.expo}},{platform:Ce.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:Ce.NextJs,detectionMethod:function(){return Be()&&window.next&&"object"==typeof window.next}},{platform:Ce.Nuxt,detectionMethod:function(){return Be()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:Ce.Angular,detectionMethod:function(){const e=Boolean(Fe()&&document.querySelector("[ng-version]")),t=Boolean(Be()&&void 0!==window.ng);return e||t}},{platform:Ce.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return Fe()&&Array.from(document.querySelectorAll("[id]")).some((t=>Object.keys(t).find(e)))}},{platform:Ce.VueJs,detectionMethod:function(){return Be()&&We(window,"__VUE")}},{platform:Ce.Svelte,detectionMethod:function(){return Be()&&We(window,"__SVELTE")}},{platform:Ce.WebUnknown,detectionMethod:function(){return Be()}},{platform:Ce.NextJsSSR,detectionMethod:function(){return $e()&&(We(global,"__next")||We(global,"__NEXT"))}},{platform:Ce.NuxtSSR,detectionMethod:function(){return $e()&&void 0!==global.__NUXT_PATHS__}},{platform:Ce.ReactSSR,detectionMethod:function(){return Ve()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("react")))}},{platform:Ce.VueJsSSR,detectionMethod:function(){return $e()&&We(global,"__VUE")}},{platform:Ce.AngularSSR,detectionMethod:function(){return Ve()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:Ce.SvelteSSR,detectionMethod:function(){return Ve()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("svelte")))}}];let ze;const He=[];let Je=!1;const Xe=()=>{if(!ze){if(ze=qe.find((e=>e.detectionMethod()))?.platform||Ce.ServerSideUnknown,Je)for(;He.length;)He.pop()?.();else He.forEach((e=>{e()}));Qe(Ce.ServerSideUnknown,10),Qe(Ce.WebUnknown,10)}return ze};function Qe(e,t){ze!==e||Je||setTimeout((()=>{ze=void 0,Je=!0,setTimeout(Xe,1e3)}),t)}const Ye={},Ze="aws-amplify",et=e=>e.replace(/\+.*/,"");new class{constructor(){this.userAgent=`${Ze}/${et(Ge)}`}get framework(){return Xe()}get isReactNative(){return this.framework===Ce.ReactNative||this.framework===Ce.Expo}observeFrameworkChanges(e){(e=>{Je||He.push(e)})(e)}};const tt=e=>(({category:e,action:t}={})=>{const n=[[Ze,et(Ge)]];if(e&&n.push([e,t]),n.push(["framework",Xe()]),e&&t){const r=((e,t)=>Ye[e]?.[t]?.additionalDetails)(e,t);r&&r.forEach((e=>{n.push(e)}))}return n})(e).map((([e,t])=>e&&t?`${e}/${t}`:e)).join(" "),nt=e=>{const{headers:t,statusCode:n}=e;return{...rt(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},rt=e=>"object"==typeof e?.$metadata,ot=async e=>{if(!e||e.statusCode<300)return;const t=await it(e),n=(e=>{const[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),r=t.message??t.Message??"Unknown error",o=new Error(r);return Object.assign(o,{name:n,$metadata:nt(e)})},it=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:nt(e)})},at=(e,t,n,r)=>async(o,i)=>{const a={...r,...o},s=await a.endpointResolver(a,i),c=await t(i,s),u=await e(c,{...a});return n(u)};function st(e=3e5){return t=>{const n=2**t*100+100*Math.random();return!(n>e)&&n}}const ct="amz-sdk-invocation-id",ut=3e5,lt=e=>{const t=st(ut)(e);return!1===t?ut:t},dt=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],ht=e=>async(t,n)=>{const r=n??await e(t)??void 0,o=r?.code||r?.name,i=t?.statusCode;return{retryable:yt(n)||gt(i,o)||(e=>!!e&&dt.includes(e))(o)||bt(i,o)}},pt=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ft=["TimeoutError","RequestTimeout","RequestTimeoutException"],gt=(e,t)=>429===e||!!t&&pt.includes(t),yt=e=>[C.NetworkError,"ERR_NETWORK"].includes(e?.name),bt=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ft.includes(t),mt="cognito-identity",vt={service:mt,retryDecider:ht(ot),computeDelay:lt,cache:"no-store"},wt=({maxAttempts:e=3,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(o,i)=>async function(a){let s,c,u=i.attemptsCount??0;const l=()=>{if(c)return _t(c,u),c;throw _t(s,u),s};for(;!r?.aborted&&u<e;){try{c=await o(a),s=void 0}catch(e){s=e,c=void 0}u=(i.attemptsCount??0)>u?i.attemptsCount??0:u+1,i.attemptsCount=u;const{isCredentialsExpiredError:d,retryable:h}=await t(c,s,i);if(!h)return l();if(i.isCredentialsExpired=!!d,!r?.aborted&&u<e){const e=n(u);await St(e,r)}}if(r?.aborted)throw new Error("Request aborted.");return l()}},St=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,r;const o=new Promise((t=>{r=t,n=setTimeout(t,e)}));return t?.addEventListener("abort",(function e(o){clearTimeout(n),t?.removeEventListener("abort",e),r()})),o},_t=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},It={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Et;const kt=new Uint8Array(16),Ct=[];for(let e=0;e<256;++e)Ct.push((e+256).toString(16).slice(1));const At=function(e,t,n){if(It.randomUUID&&!t&&!e)return It.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!Et){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Et=crypto.getRandomValues.bind(crypto)}return Et(kt)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(Ct[e[t+0]]+Ct[e[t+1]]+Ct[e[t+2]]+Ct[e[t+3]]+"-"+Ct[e[t+4]]+Ct[e[t+5]]+"-"+Ct[e[t+6]]+Ct[e[t+7]]+"-"+Ct[e[t+8]]+Ct[e[t+9]]+"-"+Ct[e[t+10]]+Ct[e[t+11]]+Ct[e[t+12]]+Ct[e[t+13]]+Ct[e[t+14]]+Ct[e[t+15]]).toLowerCase()}(r)},Ot=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(r){if(0===t.trim().length)return await n(r);{const o=e.toLowerCase();return r.headers[o]=r.headers[o]?`${r.headers[o]} ${t}`:t,await n(r)}},Tt=(e,t)=>(n,r)=>{const o={};let i=t=>e(t,r);for(let e=t.length-1;e>=0;e--)i=(0,t[e])(r)(i,o);return i(n)},xt=e=>{let t;return()=>(t||(t=e()),t)},Pt=e=>!["HEAD","GET"].includes(e.toUpperCase()),Nt=async({url:e,method:t,headers:n,body:r},{abortSignal:o,cache:i,withCrossDomainCredentials:a})=>{let s;try{s=await fetch(e,{method:t,headers:n,body:Pt(t)?r:void 0,signal:o,cache:i,credentials:a?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new T({name:C.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}const c={};return s.headers?.forEach(((e,t)=>{c[t.toLowerCase()]=e})),{statusCode:s.status,headers:c,body:null,body:Object.assign(s.body??{},{text:xt((()=>s.text())),blob:xt((()=>s.blob())),json:xt((()=>s.json()))})}},Rt=Tt(Nt,[Ot,()=>e=>async function(t){return t.headers[ct]||(t.headers[ct]=At()),e(t)},wt,({maxAttempts:e=3})=>(t,n)=>async function(r){const o=n.attemptsCount??0;return r.headers["amz-sdk-request"]=`attempt=${o+1}; max=${e}`,t(r)}]),Dt=Tt(Rt,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Lt=e=>(t,n)=>{const r=Mt(e),o=JSON.stringify(t);return Ut(n,r,o)},Mt=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Ut=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),jt=e=>at(Dt,Lt("GetCredentialsForIdentity"),Kt,{...vt,...e,userAgentValue:tt()}),Kt=async e=>{if(e.statusCode>=300)throw await ot(e);const t=await it(e);return{IdentityId:t.IdentityId,Credentials:Gt(t.Credentials),$metadata:nt(e)}},Gt=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(1e3*e)}),$t={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new T({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(n)}},Bt=(e,t=T)=>(n,r,o)=>{const{message:i,recoverySuggestion:a}=e[r];if(!n)throw new t({name:r,message:o?`${i} ${o}`:i,recoverySuggestion:a})};var Ft,Vt;(Vt=Ft||(Ft={})).AuthTokenConfigException="AuthTokenConfigException",Vt.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",Vt.AuthUserPoolException="AuthUserPoolException",Vt.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",Vt.OAuthNotConfigureException="OAuthNotConfigureException";const Wt=Bt({[Ft.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Ft.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Ft.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Ft.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Ft.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}});function qt(e){let t=!0;t=!!e&&!!e.userPoolId&&!!e.userPoolClientId,Wt(t,Ft.AuthUserPoolException)}function zt(e){Wt(!!e?.identityPoolId,Ft.InvalidIdentityPoolIdException)}function Ht(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const n=t[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent($t.convert(n).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));return{toString:()=>e,payload:JSON.parse(r)}}catch(e){throw new Error("Invalid token payload")}}class Jt extends T{constructor(e){super(e),this.constructor=Jt,Object.setPrototypeOf(this,Jt.prototype)}}function Xt(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new Jt({name:C.Unknown,message:"An unknown error has occurred.",underlyingError:e})}function Qt(e){if(!e||!e.includes(":"))throw new Jt({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}const Yt="UserUnAuthenticatedException";new Jt({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new Jt({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),new Jt({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),new Jt({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const Zt=new Jt({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),en=new Jt({name:Yt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});const tn={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function nn(e){return e?.accessToken||e?.idToken}const rn={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},on={partitions:[rn,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},an=e=>{const{partitions:t}=on;for(const{regions:n,outputs:r,regionRegex:o}of t){const t=new RegExp(o);if(n.includes(e)||t.test(e))return r.dnsSuffix}return rn.outputs.dnsSuffix},sn=URL,cn=URLSearchParams,un=({endpointOverride:e})=>t=>e?{url:new sn(e)}:(({region:e})=>({url:new sn(`https://${mt}.${e}.${an(e)}`)}))(t),ln=async e=>{if(e.statusCode>=300)throw await ot(e);return{IdentityId:(await it(e)).IdentityId,$metadata:nt(e)}};function dn(e){const t=Ht(e).payload.iss,n={};if(!t)throw new Jt({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}async function hn({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const r=await n.loadIdentityId();if(r)return r.id;const o=e?.idToken?dn(e.idToken.toString()):{},i=await async function(e,t){const n=t?.identityPoolId,r=Qt(n),o=(e=>at(Dt,Lt("GetId"),ln,{...vt,...e,userAgentValue:tt()}))({endpointResolver:un({endpointOverride:t.identityPoolEndpoint})});let i;try{i=(await o({region:r},{IdentityPoolId:n,Logins:e})).IdentityId}catch(e){throw Xt(e),new Jt(e)}if(!i)throw new Jt({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}(o,t);return n.storeIdentityId({id:i,type:e?"primary":"guest"}),i}const pn=new L("CognitoCredentialsProvider"),fn=3e6;class gn{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){pn.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){pn.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const t=e.authenticated,{tokens:n}=e,{authConfig:r}=e;try{zt(r?.Cognito)}catch{return}if(!t&&!r.Cognito.allowGuestAccess)return;const{forceRefresh:o}=e,i=this.hasTokenChanged(n),a=await hn({tokens:n,authConfig:r.Cognito,identityIdStore:this._identityIdStore});return(o||i)&&this.clearCredentials(),t?(function(e){if(!e||!e.idToken)throw new Jt({name:Yt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(n),this.credsForOIDCTokens(r.Cognito,n,a)):this.getGuestCredentials(a,r.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return pn.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const n=Qt(t.identityPoolId),r=jt({endpointResolver:un({endpointOverride:t.identityPoolEndpoint})});let o;try{o=await r({region:n},{IdentityId:e})}catch(e){throw Xt(e),new Jt(e)}if(o?.Credentials?.AccessKeyId&&o?.Credentials?.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+fn;const t={credentials:{accessKeyId:o.Credentials.AccessKeyId,secretAccessKey:o.Credentials.SecretKey,sessionToken:o.Credentials.SessionToken,expiration:o.Credentials.Expiration},identityId:e};return o.IdentityId&&(t.identityId=o.IdentityId,this._identityIdStore.storeIdentityId({id:o.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new Jt({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return pn.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const r=t.idToken?dn(t.idToken.toString()):{},o=Qt(e.identityPoolId),i=jt({endpointResolver:un({endpointOverride:e.identityPoolEndpoint})});let a;try{a=await i({region:o},{IdentityId:n,Logins:r})}catch(e){throw Xt(e),new Jt(e)}if(a?.Credentials?.AccessKeyId&&a?.Credentials?.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+fn;const e={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:n};return a.IdentityId&&(e.identityId=a.IdentityId,this._identityIdStore.storeIdentityId({id:a.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new Jt({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}const yn={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var bn;!function(e){e.InvalidAuthTokens="InvalidAuthTokens"}(bn||(bn={}));const mn=Bt({[bn.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}}),vn="CognitoIdentityServiceProvider";class wn{getKeyValueStorage(){if(!this.keyValueStorage)throw new Jt({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new Jt({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const n=Ht(t),r=await this.getKeyValueStorage().getItem(e.idToken),o=r?Ht(r):void 0,i=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,a=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",s=Number.parseInt(a),c=await this.getKeyValueStorage().getItem(e.signInDetails),u={accessToken:n,idToken:o,refreshToken:i,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:s,username:await this.getLastAuthUser()};return c&&(u.signInDetails=JSON.parse(c)),u}catch(e){return null}}async storeTokens(e){mn(void 0!==e,bn.InvalidAuthTokens);const t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);const n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){const t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),r=await this.getKeyValueStorage().getItem(t.deviceGroupKey),o=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return o&&r&&n?{deviceKey:n,deviceGroupKey:r,randomPassword:o}:null}async clearDeviceMetadata(e){const t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){qt(this.authConfig?.Cognito);const t=e??await this.getLastAuthUser();return Sn(vn,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){qt(this.authConfig?.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${vn}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){const{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){const{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}const Sn=(e,t)=>_n(yn)(`${e}`,t);function _n(e){const t=Object.values({...e});return(e,n)=>t.reduce(((t,r)=>({...t,[r]:`${e}.${n}.${r}`})),{})}const In={identityId:"identityId"},En=new L("DefaultIdentityIdStore");class kn{setAuthConfig(e){zt(e.Cognito),this.authConfig=e,this._authKeys=Cn("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){zt(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const e=await this.keyValueStorage.getItem(this._authKeys.identityId);return e?(this._hasGuestIdentityId=!0,{id:e,type:"guest"}):null}}catch(e){return En.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){zt(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const Cn=(e,t)=>_n(In)(`com.amplify.${e}`,t),An=new gn(new kn(G)),On="cognito-idp",Tn=({endpointOverride:e})=>t=>e?{url:new sn(e)}:(({region:e})=>({url:new sn(`https://${On}.${e}.${an(e)}`)}))(t),xn=Tt(Rt,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Pn={service:On,retryDecider:ht(ot),computeDelay:lt,get userAgentValue(){return tt()},cache:"no-store"},Nn=(e=>{let t;return async(...n)=>t||(t=new Promise(((r,o)=>{e(...n).then((e=>{r(e)})).catch((e=>{o(e)})).finally((()=>{t=void 0}))})),t)})((async({tokens:e,authConfig:t,username:n})=>{qt(t?.Cognito);const{userPoolId:r,userPoolClientId:o,userPoolEndpoint:i}=t.Cognito,a=function(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new Jt({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}(r);!function(e){if(function(e){return nn(e)&&!e?.refreshToken}(e))throw Zt;if(!function(e){return nn(e)&&e?.refreshToken}(e))throw en}(e);const s=(e=>at(xn,((e,t)=>(({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}))(t,{"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityProviderService.GetTokensFromRefreshToken"},JSON.stringify(e))),(async e=>{if(e.statusCode>=300){const t=await ot(e);throw Xt(t),new Jt({name:t.name,message:t.message,metadata:t.$metadata})}return it(e)}),{...Pn,...e}))({endpointResolver:Tn({endpointOverride:i})}),{AuthenticationResult:c}=await s({region:a},{ClientId:o,RefreshToken:e.refreshToken,DeviceKey:e.deviceMetadata?.deviceKey}),u=Ht(c?.AccessToken??""),l=c?.IdToken?Ht(c.IdToken):void 0,{iat:d}=u.payload;if(!d)throw new Jt({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:u,idToken:l,clockDrift:1e3*d-(new Date).getTime(),refreshToken:c?.RefreshToken??e.refreshToken,username:n}}));function Rn({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}const Dn="amplify-signin-with-hostedUI",Ln="CognitoIdentityServiceProvider",Mn=(e,t)=>_n(tn)(e,t),Un=new class{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){qt(this.cognitoConfig);const e=Mn(Ln,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){qt(this.cognitoConfig);const e=Mn(Ln,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(Dn),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){qt(this.cognitoConfig);const e=Mn(Ln,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){qt(this.cognitoConfig);const t=Mn(Ln,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){qt(this.cognitoConfig);const e=Mn(Ln,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){qt(this.cognitoConfig);const t=Mn(Ln,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){qt(this.cognitoConfig);const e=Mn(Ln,this.cognitoConfig.userPoolClientId);return"true"===await this.keyValueStorage.getItem(e.inflightOAuth)}async storeOAuthInFlight(e){qt(this.cognitoConfig);const t=Mn(Ln,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){qt(this.cognitoConfig);const e=Mn(Ln,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(Dn),[n,r]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===r}}async storeOAuthSignIn(e,t=!1){qt(this.cognitoConfig);const n=Mn(Ln,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}(G),jn=[];class Kn{constructor(){this.waitForInflightOAuth="undefined"!=typeof window&&void 0!==window.document?async()=>{if(await Un.loadOAuthInFlight())return this.inflightPromise||(this.inflightPromise=new Promise(((e,t)=>{var n;n=e,jn.push(n)}))),this.inflightPromise}:async()=>{}}setAuthConfig(e){Un.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new Jt({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new Jt({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{qt(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();const n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;const r=!!t?.idToken&&Rn({expiresAt:1e3*(t.idToken?.payload?.exp??0),clockDrift:t.clockDrift??0}),o=Rn({expiresAt:1e3*(t.accessToken?.payload?.exp??0),clockDrift:t.clockDrift??0});return(e?.forceRefresh||r||o)&&(t=await this.refreshTokens({tokens:t,username:n}),null===t)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{const{signInDetails:n}=e,r=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return r.signInDetails=n,await this.setTokens({tokens:r}),V.dispatch("auth",{event:"tokenRefresh"},"Auth",$),r}catch(e){return this.handleErrors(e)}}handleErrors(e){if(Xt(e),e.name!==C.NetworkError&&this.clearTokens(),V.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",$),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}const Gn=new class{constructor(){this.authTokenStore=new wn,this.authTokenStore.setKeyValueStorage(G),this.tokenOrchestrator=new Kn,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(Nn)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}},{tokenOrchestrator:$n}=Gn,Bn={configure(e,t){const n=re(e),r=new O({sameSite:"lax"}),o=t?.ssr?r:G,i=t?.ssr?new gn(new kn(r)):An;if(n.Auth)if(t?.Auth)ke.configure(n,t);else{if(!ke.libraryOptions.Auth)return Gn.setAuthConfig(n.Auth),Gn.setKeyValueStorage(o),void ke.configure(n,{...t,Auth:{tokenProvider:Gn,credentialsProvider:i}});if(t){const e=ke.libraryOptions.Auth;return void 0!==t.ssr&&(Gn.setKeyValueStorage(o),e.credentialsProvider=i),void ke.configure(n,{Auth:e,...t})}ke.configure(n)}else ke.configure(n,t)},getConfig:()=>ke.getConfig()},Fn=[400,401,403],Vn=["BadRequestException","UnauthorizedException"];var Wn,qn,zn;!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error",e.EVENT_SUBSCRIBE="subscribe",e.EVENT_PUBLISH="publish",e.EVENT_SUBSCRIBE_ACK="subscribe_success",e.EVENT_PUBLISH_ACK="publish_success",e.EVENT_STOP="unsubscribe",e.EVENT_COMPLETE="unsubscribe_success",e.EVENT_SUBSCRIBE_ERROR="subscribe_error"}(Wn||(Wn={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(qn||(qn={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(zn||(zn={}));const Hn={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},Jn=3e5;function Xn(e){return"function"==typeof e}var Qn,Yn=((Qn=function(e){var t;t=this,Error.call(t),t.stack=(new Error).stack,this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}).prototype=Object.create(Error.prototype),Qn.prototype.constructor=Qn,Qn);function Zn(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var er=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=ce(i),s=a.next();!s.done;s=a.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this);var c=this.initialTeardown;if(Xn(c))try{c()}catch(e){o=e instanceof Yn?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=ce(u),d=l.next();!d.done;d=l.next()){var h=d.value;try{nr(h)}catch(e){o=null!=o?o:[],e instanceof Yn?o=le(le([],ue(o)),ue(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(o)throw new Yn(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)nr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Zn(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Zn(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function tr(e){return e instanceof er||e&&"closed"in e&&Xn(e.remove)&&Xn(e.add)&&Xn(e.unsubscribe)}function nr(e){Xn(e)?e():e.unsubscribe()}er.EMPTY;var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},or={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=or.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,le([e,t],ue(n))):setTimeout.apply(void 0,le([e,t],ue(n)))},clearTimeout:function(e){var t=or.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ir(e){or.setTimeout((function(){var t=rr.onUnhandledError;if(!t)throw e;t(e)}))}function ar(){}var sr=cr("C",void 0,void 0);function cr(e,t,n){return{kind:e,value:t,error:n}}var ur=null,lr=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,tr(t)&&t.add(n)):n.destination=br,n}return ie(t,e),t.create=function(e,t,n){return new fr(e,t,n)},t.prototype.next=function(e){this.isStopped?yr(function(e){return cr("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?yr(cr("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?yr(sr,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(er),dr=Function.prototype.bind;function hr(e,t){return dr.call(e,t)}var pr=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){gr(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){gr(e)}else gr(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){gr(e)}},e}(),fr=function(e){function t(t,n,r){var o,i,a=e.call(this)||this;return Xn(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&rr.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&hr(t.next,i),error:t.error&&hr(t.error,i),complete:t.complete&&hr(t.complete,i)}):o=t,a.destination=new pr(o),a}return ie(t,e),t}(lr);function gr(e){var t;rr.useDeprecatedSynchronousErrorHandling?(t=e,rr.useDeprecatedSynchronousErrorHandling&&ur&&(ur.errorThrown=!0,ur.error=t)):ir(e)}function yr(e,t){var n=rr.onStoppedNotification;n&&or.setTimeout((function(){return n(e,t)}))}var br={closed:!0,next:ar,error:function(e){throw e},complete:ar},mr="function"==typeof Symbol&&Symbol.observable||"@@observable";function vr(e){return e}var wr=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof lr||function(e){return e&&Xn(e.next)&&Xn(e.error)&&Xn(e.complete)}(r)&&tr(r)?e:new fr(e,t,n);return function(e){if(rr.useDeprecatedSynchronousErrorHandling){var t=!ur;if(t&&(ur={errorThrown:!1,error:null}),e(),t){var n=ur,r=n.errorThrown,o=n.error;if(ur=null,r)throw o}}else e()}((function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Sr(t))((function(t,r){var o=new fr({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[mr]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===(n=e).length?vr:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=Sr(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Sr(e){var t;return null!==(t=null!=e?e:rr.Promise)&&void 0!==t?t:Promise}function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var Ir="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function Er(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function kr(e){return Cr(e.source,Er(e.source,e.start))}function Cr(e,t){var n=e.locationOffset.column-1,r=Or(n)+e.body,o=t.line-1,i=e.locationOffset.line-1,a=t.line+i,s=1===t.line?n:0,c=t.column+s,u="".concat(e.name,":").concat(a,":").concat(c,"\n"),l=r.split(/\r\n|[\n\r]/g),d=l[o];if(d.length>120){for(var h=Math.floor(c/80),p=c%80,f=[],g=0;g<d.length;g+=80)f.push(d.slice(g,g+80));return u+Ar([["".concat(a),f[0]]].concat(f.slice(1,h+1).map((function(e){return["",e]})),[[" ",Or(p-1)+"^"],["",f[h+1]]]))}return u+Ar([["".concat(a-1),l[o-1]],["".concat(a),d],["",Or(c-1)+"^"],["".concat(a+1),l[o+1]]])}function Ar(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,r=e[0],o=e[1];return Or(n-(t=r).length)+t+(o?" | "+o:" |")})).join("\n")}function Or(e){return Array(e+1).join(" ")}function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){return!t||"object"!==Tr(t)&&"function"!=typeof t?Dr(e):t}function Dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e){var t="function"==typeof Map?new Map:void 0;return Lr=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Mr(e,arguments,Kr(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),jr(r,e)},Lr(e)}function Mr(e,t,n){return Mr=Ur()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&jr(o,n.prototype),o},Mr.apply(null,arguments)}function Ur(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function jr(e,t){return jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jr(e,t)}function Kr(e){return Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kr(e)}var Gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}(a,e);var t,n,r,o,i=(t=a,n=Ur(),function(){var e,r=Kr(t);if(n){var o=Kr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Rr(this,e)});function a(e,t,n,r,o,s,c){var u,l,d,h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(h=i.call(this,e)).name="GraphQLError",h.originalError=null!=s?s:void 0,h.nodes=$r(Array.isArray(t)?t:t?[t]:void 0);for(var p=[],f=0,g=null!==(y=h.nodes)&&void 0!==y?y:[];f<g.length;f++){var y,b=g[f].loc;null!=b&&p.push(b)}p=$r(p),h.source=null!=n?n:null===(u=p)||void 0===u?void 0:u[0].source,h.positions=null!=r?r:null===(l=p)||void 0===l?void 0:l.map((function(e){return e.start})),h.locations=r&&n?r.map((function(e){return Er(n,e)})):null===(d=p)||void 0===d?void 0:d.map((function(e){return Er(e.source,e.start)})),h.path=null!=o?o:void 0;var m,v=null==s?void 0:s.extensions;return null==c&&"object"==_r(m=v)&&null!==m?h.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Pr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},v):h.extensions=null!=c?c:{},Object.defineProperties(Dr(h),{message:{enumerable:!0},locations:{enumerable:null!=h.locations},path:{enumerable:null!=h.path},extensions:{enumerable:null!=h.extensions&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=s&&s.stack?(Object.defineProperty(Dr(h),"stack",{value:s.stack,writable:!0,configurable:!0}),Rr(h)):(Error.captureStackTrace?Error.captureStackTrace(Dr(h),a):Object.defineProperty(Dr(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return r=a,(o=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.loc&&(t+="\n\n"+kr(o.loc))}else if(e.source&&e.locations)for(var i=0,a=e.locations;i<a.length;i++){var s=a[i];t+="\n\n"+Cr(e.source,s)}return t}(this)}},{key:Ir,get:function(){return"Object"}}])&&Nr(r.prototype,o),a}(Lr(Error));function $r(e){return void 0===e||0===e.length?void 0:e}class Br extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}const Fr=e=>e&&e.nonRetryable,Vr={convert(e,t={urlSafe:!1,skipPadding:!1}){const n="string"==typeof e?e:function(e){return Array.from(e,(e=>String.fromCodePoint(e))).join("")}(e);let r=(()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new T({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(n);return t.urlSafe&&(r=r.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(r=r.replace(/=/g,"")),r}},Wr=new L("retryUtil");var qr,zr;function Hr(e){return function(t){if(function(e){return Xn(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Jr(e,t,n,r,o){return new Xr(e,t,n,r,o)}!function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(qr||(qr={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(zr||(zr={}));var Xr=function(e){function t(t,n,r,o,i,a){var s=e.call(this,t)||this;return s.onFinalize=i,s.shouldUnsubscribe=a,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return ie(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(lr),Qr=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Yr(e){return Xn(null==e?void 0:e.then)}function Zr(e){return Xn(e[mr])}function eo(e){return Symbol.asyncIterator&&Xn(null==e?void 0:e[Symbol.asyncIterator])}function to(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var no="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ro(e){return Xn(null==e?void 0:e[no])}function oo(e){return function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=o[e](t)).value instanceof de?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,(function(){var t,n,r;return se(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,de(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,de(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,de(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function io(e){return Xn(null==e?void 0:e.getReader)}function ao(e){if(e instanceof wr)return e;if(null!=e){if(Zr(e))return o=e,new wr((function(e){var t=o[mr]();if(Xn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(Qr(e))return r=e,new wr((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(Yr(e))return n=e,new wr((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,ir)}));if(eo(e))return so(e);if(ro(e))return t=e,new wr((function(e){var n,r;try{for(var o=ce(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(io(e))return so(oo(e))}var t,n,r,o;throw to(e)}function so(e){return new wr((function(t){(function(e,t){var n,r,o,i;return ae(this,void 0,void 0,(function(){var a,s;return se(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=ce(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,o,(t=e[n](t)).done,t.value)}))}}}(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}class co{networkMonitor(e){const t=(()=>{if("undefined"==typeof self)return!1;const e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope})()?self:"undefined"!=typeof window&&window;return t?new wr((e=>{e.next({online:t.navigator.onLine});const n=()=>{e.next({online:!0})},r=()=>{e.next({online:!1})};return t.addEventListener("online",n),t.addEventListener("offline",r),co._observers.push(e),()=>{t.removeEventListener("online",n),t.removeEventListener("offline",r),co._observers=co._observers.filter((t=>t!==e))}})):ao([{online:!0}])}static _observerOverride(e){for(const t of this._observers)t.closed?this._observers=this._observers.filter((e=>e!==t)):t?.next&&t.next(e)}}co._observers=[];const uo=()=>(new co).networkMonitor(),lo={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class ho{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=uo().subscribe((({online:e})=>{this.record(e?lo.ONLINE:lo.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()})),this._linkedConnectionStateObservable=new wr((e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e}))}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=uo().subscribe((({online:e})=>{this.record(e?lo.ONLINE:lo.OFFLINE)})))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){let e;return this._linkedConnectionStateObservable.pipe((n=e=>this.connectionStatesTranslator(e),Hr((function(e,t){var r=0;e.subscribe(Jr(t,(function(e){t.next(n.call(undefined,e,r++))})))})))).pipe((t=t=>{const n=t!==e;return e=t,n},Hr((function(e,n){var r=0;e.subscribe(Jr(n,(function(e){return t.call(void 0,e,r++)&&n.next(e)})))}))));var t,n}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();const t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:n,keepAliveState:r}){return"connected"===e&&"disconnected"===t?zr.ConnectedPendingNetwork:"connected"===e&&"disconnected"===n?zr.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===n&&"disconnected"===t?zr.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===n?zr.ConnectionDisrupted:"connected"===e&&"unhealthy"===r?zr.ConnectedPendingKeepAlive:"connecting"===e?zr.Connecting:"disconnected"===e?zr.Disconnected:zr.Connected}}var po;!function(e){e.START_RECONNECT="START_RECONNECT",e.HALT_RECONNECT="HALT_RECONNECT"}(po||(po={}));class fo{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===po.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout((()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval((()=>{this._triggerReconnect()}),6e4)}),5e3)),e===po.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach((e=>{e.complete?.()}))}_triggerReconnect(){this.reconnectObservers.forEach((e=>{e.next?.()}))}}const go="wss://",yo=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,bo=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,mo="/realtime",vo=async e=>{const{appSyncGraphqlEndpoint:t,query:n,libraryConfigHeaders:r=(()=>({})),additionalHeaders:o={},authToken:i}=e;let a={};const s=await r();if("function"==typeof o){const e={url:t||"",queryString:n||""};a=await o(e)}else a=o;return i&&(a={...a,Authorization:i}),{additionalCustomHeaders:a,libraryConfigHeaders:s}},wo=e=>((e,t)=>e.Auth.fetchAuthSession(t))(ke,e),So=e=>Object.keys(e).map((e=>e.toLowerCase())).sort().join(";"),_o="X-Amz-Date".toLowerCase(),Io="X-Amz-Security-Token".toLowerCase(),Eo="aws4_request",ko="AWS4-HMAC-SHA256",Co=(e,t)=>{const n=new ve(e??void 0);return n.update(t),n.digestSync()},Ao=(e,t)=>function(e){let t="";for(let n=0;n<e.byteLength;n++)t+=we[e[n]];return t}(Co(e,t)),Oo=e=>Object.entries(e).map((([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""}))).sort(((e,t)=>e.key<t.key?-1:1)).map((e=>`${e.key}:${e.value}\n`)).join(""),To=e=>encodeURIComponent(e).replace(/[!'()*]/g,xo),xo=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,Po=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",No=e=>null==e?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":Ro(e)?Ao(null,e):"UNSIGNED-PAYLOAD",Ro=e=>"string"==typeof e||ArrayBuffer.isView(e)||Do(e),Do=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),Lo=(e,t)=>{const n=(({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:o=!0})=>{const{accessKeyId:i,secretAccessKey:a,sessionToken:s}=e,{longDate:c,shortDate:u}=(e=>{const t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}})(t);return{accessKeyId:i,credentialScope:`${u}/${n}/${r}/${Eo}`,longDate:c,secretAccessKey:a,sessionToken:s,shortDate:u,signingRegion:n,signingService:r,uriEscapePath:o}})(t),{accessKeyId:r,credentialScope:o,longDate:i,sessionToken:a}=n,s={...e.headers};s.host=e.url.host,s[_o]=i,a&&(s[Io]=a);const c={...e,headers:s},u=((e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:o,signingRegion:i,signingService:a,uriEscapePath:s})=>{const c=(({body:e,headers:t,method:n,url:r},o=!0)=>{return[n,Po(r.pathname,o),(i=r.searchParams,Array.from(i).sort((([e,t],[n,r])=>e===n?t<r?-1:1:e<n?-1:1)).map((([e,t])=>`${To(e)}=${To(t)}`)).join("&")),Oo(t),So(t),No(e)].join("\n");var i})(e,s),u=((e,t,n)=>[ko,e,t,n].join("\n"))(n,t,Ao(null,c)),l=Ao(((e,t,n,r)=>{const o=Co(`AWS4${e}`,t),i=Co(o,n),a=Co(i,r);return Co(a,Eo)})(r,o,i,a),u);return l})(c,n),l=`Credential=${r}/${o}`,d=`SignedHeaders=${So(s)}`,h=`Signature=${u}`;return s.authorization=`${ko} ${l}, ${d}, ${h}`,c},Mo=new L("AWSAppSyncRealTimeProvider Auth"),Uo=async({host:e})=>{const t=await wo();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}},jo=async({apiKey:e,host:t})=>({host:t,"x-amz-date":(new Date).toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}),Ko=async({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:n,region:r})=>{const o={region:r,service:"appsync"},i=(await wo()).credentials,a={url:`${n}${t}`,data:e,method:"POST",headers:{...Hn}};return Lo({headers:a.headers,method:a.method,url:new sn(a.url),body:a.data},{credentials:i,signingRegion:o.region,signingService:o.service}).headers},Go=async({host:e,additionalCustomHeaders:t})=>{if(!t?.Authorization)throw new Error("No auth token specified");return{Authorization:t.Authorization,host:e}},$o=async({apiKey:e,authenticationType:t,canonicalUri:n,appSyncGraphqlEndpoint:r,region:o,additionalCustomHeaders:i,payload:a})=>{const s={apiKey:jo,iam:Ko,oidc:Uo,userPool:Uo,lambda:Go,none:Go};if(t&&s[t]){const c=s[t],u=r?new sn(r).host:void 0,l="apiKey"===t?e:void 0;return Mo.debug(`Authenticating with ${JSON.stringify(t)}`),await c({payload:a,canonicalUri:n,appSyncGraphqlEndpoint:r,apiKey:l,region:o,host:u,additionalCustomHeaders:i})}Mo.debug(`Authentication type ${t} not supported`)},Bo=e=>{V.dispatch("api",e,"PubSub",$)};class Fo{constructor(e){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=zn.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new ho,this.reconnectionMonitor=new fo,this._establishConnection=async(e,t)=>{this.logger.debug(`Establishing WebSocket connection to ${e}`);try{await this._openConnection(e,t),await this._initiateHandshake()}catch(e){const{errorType:t,errorCode:n}=e;throw Fn.includes(n)||Vn.includes(t)?new Br(t):t?new Error(t):e}},this.logger=new L(e.providerName),this.wsProtocolName=e.wsProtocolName,this.wsConnectUri=e.connectUri,this.connectionStateMonitorSubscription=this._startConnectionStateMonitoring()}close(){return this.socketStatus=zn.CLOSED,this.connectionStateMonitor.record(lo.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise(((e,t)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=t=>{this._closeSocket(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,e()},this.awsRealTimeSocket.onerror=e=>{t(e)},this.awsRealTimeSocket.close()):e()}))}subscribe(e,t){return new wr((n=>{if(!e?.appSyncGraphqlEndpoint)return n.error({errors:[{...new Gr("Subscribe only available for AWS AppSync endpoint")}]}),void n.complete();let r=!1;const o=At(),i=()=>{r||(r=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:e,observer:n,subscriptionId:o,customUserAgentDetails:t}).catch((e=>{this.logger.debug(`${qr.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this._closeSocket()})).finally((()=>{r=!1})))},a=new wr((e=>{this.reconnectionMonitor.addObserver(e)})).subscribe((()=>{i()}));return i(),async()=>{await this._cleanupSubscription(o,a)}}))}async connect(e){this.socketStatus!==zn.READY&&await this._connectWebSocket(e)}async publish(e,t){if(this.socketStatus!==zn.READY)throw new Error("Subscription has not been initialized");return this._publishMessage(e,t)}async _connectWebSocket(e){const{apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:o}=e,{additionalCustomHeaders:i}=await vo(e);this.connectionStateMonitor.record(lo.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:o,additionalCustomHeaders:i})}async _publishMessage(e,t){const n=At(),{additionalCustomHeaders:r,libraryConfigHeaders:o}=await vo(e),i=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:t,additionalCustomHeaders:r,libraryConfigHeaders:o,publish:!0});return new Promise(((e,t)=>{if(this.awsRealTimeSocket){const r=o=>{const i=JSON.parse(o.data);if(i.id===n&&"publish_success"===i.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",r),s(),e()),i.errors&&i.errors.length>0){const e=i.errors.map((e=>e.errorType));s(),t(new Error(`Publish errors: ${e.join(", ")}`))}},o=e=>{s(),t(new Error(`WebSocket error: ${e}`))},a=()=>{s(),t(new Error("WebSocket is closed"))},s=()=>{this.awsRealTimeSocket?.removeEventListener("message",r),this.awsRealTimeSocket?.removeEventListener("error",o),this.awsRealTimeSocket?.removeEventListener("close",a)};this.awsRealTimeSocket.addEventListener("message",r),this.awsRealTimeSocket.addEventListener("error",o),this.awsRealTimeSocket.addEventListener("close",a),this.awsRealTimeSocket.send(i)}else t(new Error("WebSocket is not connected"))}))}async _cleanupSubscription(e,t){t?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(e);const{subscriptionState:t}=this.subscriptionObserverMap.get(e)||{};if(!t)return;if(t!==qn.CONNECTED)throw new Error("Subscription never connected");this._sendUnsubscriptionMessage(e)}catch(e){this.logger.debug(`Error while unsubscribing ${e}`)}finally{this._removeSubscriptionObserver(e)}}_startConnectionStateMonitoring(){return this.connectionStateMonitor.connectionStateObservable.subscribe((e=>{Bo({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===zr.ConnectionDisrupted&&this.reconnectionMonitor.record(po.START_RECONNECT),[zr.Connected,zr.ConnectedPendingDisconnect,zr.ConnectedPendingKeepAlive,zr.ConnectedPendingNetwork,zr.ConnectionDisruptedPendingNetwork,zr.Disconnected].includes(e)&&this.reconnectionMonitor.record(po.HALT_RECONNECT)}))}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:n,customUserAgentDetails:r}){const{query:o,variables:i}=e;this.subscriptionObserverMap.set(n,{observer:t,query:o??"",variables:i??{},subscriptionState:qn.PENDING,startAckTimeoutId:void 0});const{additionalCustomHeaders:a,libraryConfigHeaders:s}=await vo(e),c=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:r,additionalCustomHeaders:a,libraryConfigHeaders:s});try{await this._connectWebSocket(e)}catch(e){return void this._logStartSubscriptionError(n,t,e)}const{subscriptionFailedCallback:u,subscriptionReadyCallback:l}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:t,subscriptionState:qn.PENDING,query:o??"",variables:i??{},subscriptionReadyCallback:l,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout((()=>{this._timeoutStartSubscriptionAck(n)}),15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(c)}_logStartSubscriptionError(e,t,n){this.logger.debug({err:n});const r=String(n.message??"");if(this._closeSocket(),this.connectionState!==zr.ConnectionDisruptedPendingNetwork){Fr(n)?t.error({errors:[{...new Gr(`${qr.CONNECTION_FAILED}: ${r}`)}]}):this.logger.debug(`${qr.CONNECTION_FAILED}: ${r}`);const{subscriptionFailedCallback:o}=this.subscriptionObserverMap.get(e)||{};"function"==typeof o&&o()}}async _waitForSubscriptionToBeConnected(e){const t=this.subscriptionObserverMap.get(e);if(t){const{subscriptionState:n}=t;if(n===qn.PENDING)return new Promise(((n,r)=>{const{observer:o,subscriptionState:i,variables:a,query:s}=t;this.subscriptionObserverMap.set(e,{observer:o,subscriptionState:i,variables:a,query:s,subscriptionReadyCallback:n,subscriptionFailedCallback:r})}))}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===zn.READY){const t=this._unsubscribeMessage(e),n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){this.logger.debug({err:e})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),this.allowNoSubscriptions||setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.connectionStateMonitor.record(lo.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{this.logger.debug("closing WebSocket...");const e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=zn.CLOSED,this._closeSocket()}else this.socketStatus=zn.CLOSED}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(e){const t=Date.now();t-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(lo.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(lo.KEEP_ALIVE),t-this.keepAliveTimestamp>e&&this._errorDisconnect(qr.TIMEOUT_DISCONNECT)}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;const[t,n]=this._handleSubscriptionData(e);if(t)return void this.maintainKeepAlive();const{type:r,id:o,payload:i}=n,{observer:a=null,query:s="",variables:c={},startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:d}=this.subscriptionObserverMap.get(o)||{};if(r===Wn.GQL_START_ACK||r===Wn.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:s,variables:c})}`),"function"==typeof l&&l(),u&&clearTimeout(u),Bo({event:qr.SUBSCRIPTION_ACK,data:{query:s,variables:c},message:"Connection established for subscription"});const e=qn.CONNECTED;return a&&this.subscriptionObserverMap.set(o,{observer:a,query:s,variables:c,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:l,subscriptionFailedCallback:d}),void this.connectionStateMonitor.record(lo.CONNECTION_ESTABLISHED)}if(r!==Wn.GQL_CONNECTION_KEEP_ALIVE){if(r===Wn.GQL_ERROR||r===Wn.EVENT_SUBSCRIBE_ERROR){const t=qn.FAILED;if(a){this.subscriptionObserverMap.set(o,{observer:a,query:s,variables:c,startAckTimeoutId:u,subscriptionReadyCallback:l,subscriptionFailedCallback:d,subscriptionState:t});let h=JSON.stringify(i??n);if(r===Wn.EVENT_SUBSCRIBE_ERROR){const{errors:t}=JSON.parse(String(e.data));if(Array.isArray(t)&&t.length>0){const e=t[0];h=`${e.errorType}: ${e.message}`}}this.logger.debug(`${qr.CONNECTION_FAILED}: ${h}`),a.error({errors:[{...new Gr(`${qr.CONNECTION_FAILED}: ${h}`)}]}),u&&clearTimeout(u),"function"==typeof d&&d()}}}else this.maintainKeepAlive()}_errorDisconnect(e){this.logger.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this._closeSocket(),this.awsRealTimeSocket.close()),this.socketStatus=zn.CLOSED}_closeSocket(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(lo.CLOSED)}_timeoutStartSubscriptionAck(e){const t=this.subscriptionObserverMap.get(e);if(t){const{observer:n,query:r,variables:o}=t;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:o,subscriptionState:qn.FAILED}),this._closeSocket(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:n,region:r,additionalCustomHeaders:o}){if(this.socketStatus!==zn.READY)return new Promise((async(i,a)=>{if(this.promiseArray.push({res:i,rej:a}),this.socketStatus===zn.CLOSED)try{this.socketStatus=zn.CONNECTING;const i="{}",a=await $o({authenticationType:t,payload:i,canonicalUri:this.wsConnectUri,apiKey:n,appSyncGraphqlEndpoint:e,region:r,additionalCustomHeaders:o}),s=a?JSON.stringify(a):"",c=`header-${Vr.convert(s,{urlSafe:!0,skipPadding:!0})}`,u=(e=>{const t=(e=>{if(!e)return{};if("Authorization"in e){const{Authorization:t,...n}=e;return n}return e})(e),n=new cn;return Object.entries(t).forEach((([e,t])=>{n.append(e,t)})),n})(o),l=((e,t)=>{const n=(e=>{let t=e??"";return t=null!==t.match(bo)?t.concat(mo).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):null===t.match(yo)?t.concat(mo):t.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma"),t=t.replace("https://",go).replace("http://",go),new sn(t)})(e),r=new cn(n.search);for(const[e,n]of t.entries())r.append(e,n);return n.search=r.toString(),n.toString()})(e,u);await this._establishRetryableConnection(l,c),this.promiseArray.forEach((({res:e})=>{this.logger.debug("Notifying connection successful"),e()})),this.socketStatus=zn.READY,this.promiseArray=[]}catch(e){this.logger.debug("Connection exited with",e),this.promiseArray.forEach((({rej:t})=>{t(e)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=zn.CLOSED}}))}async _establishRetryableConnection(e,t){this.logger.debug("Establishing retryable connection"),await((e,t,n=3e5,r)=>async function(e,t,n,r){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise((async(o,i)=>{let a,s,c=0,u=!1,l=()=>{};for(r&&r.then((()=>{u=!0,clearTimeout(a),l()}));!u;){c++,Wr.debug(`${e.name} attempt #${c} with this vars: ${JSON.stringify(t)}`);try{return void o(await e(...t))}catch(r){if(s=r,Wr.debug(`error on ${e.name}`,r),Fr(r))return Wr.debug(`${e.name} non retryable error`,r),void i(r);const o=n(c,t,r);if(Wr.debug(`${e.name} retrying in ${o} ms`),!1===o||u)return void i(r);await new Promise((e=>{l=e,a=setTimeout(l,o)}))}}i(s)}))}(e,t,st(n),r))(this._establishConnection.bind(this),[e,t],5e3)}async _openConnection(e,t){return new Promise(((n,r)=>{const o=this._getNewWebSocket(e,[this.wsProtocolName,t]);o.onerror=()=>{this.logger.debug("WebSocket connection error")},o.onclose=()=>{this._closeSocket(),r(new Error("Connection handshake error"))},o.onopen=()=>{this.awsRealTimeSocket=o,n()}}))}_getNewWebSocket(e,t){return new WebSocket(e,t)}async _initiateHandshake(){return new Promise(((e,t)=>{if(!this.awsRealTimeSocket)return void t(new Error("awsRealTimeSocket undefined"));let n=!1;this.awsRealTimeSocket.onerror=e=>{this.logger.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),t(new Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=r=>{if("string"!=typeof r.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${r.data} `);const o=JSON.parse(r.data),{type:i}=o,a=this._extractConnectionTimeout(o);if(i===Wn.GQL_CONNECTION_ACK)return n=!0,this._registerWebsocketHandlers(a),void e("Connected to AWS AppSyncRealTime");if(i===Wn.GQL_CONNECTION_ERROR){const{errorType:e,errorCode:n}=this._extractErrorCodeAndType(o);t({errorType:e,errorCode:n})}};const r={type:Wn.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(r));const o=e=>{e||(this.connectionStateMonitor.record(lo.CONNECTION_FAILED),t(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout((()=>{o(n)}),15e3)}))}_registerWebsocketHandlers(e){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval((()=>{this.keepAliveHeartbeat(e)}),5e3),this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{this.logger.debug(e),this._errorDisconnect(qr.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),this._errorDisconnect(qr.CONNECTION_CLOSED)})}}const Vo=(e,t)=>e?"identityPool"===e?"iam":e:t,Wo=()=>{const e=ke.getConfig(),t=e.API?.Events;if(!t)throw new Error("Amplify configuration is missing. Have you called Amplify.configure()?");const n=Vo(t.defaultAuthMode,"apiKey");return{appSyncGraphqlEndpoint:t.endpoint,region:t.region,authenticationType:n,apiKey:t.apiKey}},qo=e=>{if(Array.isArray(e))return e.map(((e,t)=>{const n=JSON.stringify(e);if(void 0===n)throw new Error(`Event must be a valid JSON value. Received ${e} at index ${t}`);return n}));const t=JSON.stringify(e);if(void 0===t)throw new Error(`Event must be a valid JSON value. Received ${e}`);return[t]},zo="AWSAppSyncEventsProvider",Ho=new class extends Fo{constructor(){super({providerName:zo,wsProtocolName:"aws-appsync-event-ws",connectUri:""}),this.allowNoSubscriptions=!0}getProviderName(){return zo}async connect(e){return super.connect(e)}subscribe(e,t){return super.subscribe(e,t).pipe()}async publish(e,t){return super.publish(e,t)}closeIfNoActiveSubscription(){this._closeSocketIfRequired()}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:n,additionalCustomHeaders:r,libraryConfigHeaders:o,publish:i}){const{appSyncGraphqlEndpoint:a,authenticationType:s,query:c,apiKey:u,region:l,variables:d}=e,h={channel:c,events:void 0!==d?qo(d):void 0},p=JSON.stringify(h),f={...await $o({apiKey:u,appSyncGraphqlEndpoint:a,authenticationType:s,payload:p,canonicalUri:"",region:l,additionalCustomHeaders:r}),...o,...r,[N]:tt(n)},g={id:t,channel:c,events:void 0!==d?qo(d):void 0,authorization:{...f},payload:{events:void 0!==d?qo(d):void 0,channel:c,extensions:{authorization:{...f}}},type:i?Wn.EVENT_PUBLISH:Wn.EVENT_SUBSCRIBE};return JSON.stringify(g)}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync Events: ${e.data}`);const{id:t="",event:n,type:r}=JSON.parse(String(e.data)),{observer:o=null,query:i="",variables:a={}}=this.subscriptionObserverMap.get(t)||{};if(this.logger.debug({id:t,observer:o,query:i,variables:a}),r===Wn.DATA&&n){const e=JSON.parse(n);return o?o.next({id:t,type:r,event:e}):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:r,payload:e}]}return[!1,{id:t,type:r,payload:n}]}_unsubscribeMessage(e){return{id:e,type:Wn.EVENT_STOP}}_extractConnectionTimeout(e){const{connectionTimeoutMs:t=Jn}=e;return t}_extractErrorCodeAndType(e){const{errors:[{errorType:t="",errorCode:n=0}={}]=[]}=e;return{errorCode:n,errorType:t}}};class Jo extends T{get response(){return this._response?Xo(this._response):void 0}constructor(e){super(e),this.constructor=Jo,Object.setPrototypeOf(this,Jo.prototype),e.response&&(this._response=e.response)}}const Xo=e=>({...e,headers:{...e.headers}});class Qo extends Jo{constructor(e){super(e),this.constructor=Qo,Object.setPrototypeOf(this,Qo.prototype)}}class Yo extends Qo{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=Yo,Object.setPrototypeOf(this,Yo.prototype)}}var Zo;!function(e){e.InvalidApiName="InvalidApiName"}(Zo||(Zo={})),Zo.InvalidApiName;const ei=async e=>{if(!e)return;const t=await ot(ti(e));if(t){const n=await(e.body?.text());return ni(t,{statusCode:e.statusCode,headers:e.headers,body:n})}},ti=e=>{let t;const n=new Proxy(e.body,{get:(e,n,r)=>"json"===n?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(e){return{}}}:"text"===n?async()=>(t||(t=e.text()),t):Reflect.get(e,n,r)});return new Proxy(e,{get:(e,t,r)=>"body"===t?n:Reflect.get(e,t,r)})},ni=(e,t)=>{const n=new Qo({name:e?.name,message:e.message,underlyingError:e,response:t});return Object.assign(n,{$metadata:e.$metadata})},ri=new L("RestApis"),oi=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,ii="execute-api",ai="us-east-1",si=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,ci=e=>new Date(Date.now()+e),ui=Tt(Nt,[Ot,wt,({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let o;return(i,a)=>async function(s){o=o??0;const c={credentials:"function"==typeof e?await e({forceRefresh:!!a?.isCredentialsExpired}):e,signingDate:ci(o),signingRegion:t,signingService:n,uriEscapePath:r},u=await Lo(s,c),l=await i(u),d=(({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"])(l);return d&&(o=((e,t)=>((e,t)=>Math.abs(ci(t).getTime()-e)>=3e5)(e,t)?e-Date.now():t)(Date.parse(d),o)),l}}]),li=Tt(Nt,[Ot,wt]),di=e=>{const t=e?.strategy;return"no-retry"===t?()=>Promise.resolve({retryable:!1}):ht(ei)},hi=async e=>{try{const{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(e){ri.debug("No credentials available, the request will be unsigned.")}return null},pi=new WeakMap,fi=(e,{url:t,options:n,abortController:r})=>{const o=r??new AbortController,i=function(e,t){const n=e=>!!t,r=new AbortController,o=r.signal,i=t?.signal;let a;const s=async()=>{try{const t=await(n(),e());if(t.statusCode>=300)throw await ei(t);return t}catch(e){const t=i??o,n=a??t.reason;if("AbortError"===e.name||!0===t?.aborted){const t=new Yo({...n&&{message:n},underlyingError:e,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw ri.debug(e),t}throw ri.debug(e),e}};if(n())return s();{const e=e=>{!0!==o.aborted&&(r.abort(e),e&&o.reason!==e&&(a=e))};return{response:s(),cancel:e}}}((async()=>(async(e,t,n,r)=>{const{url:o,method:i,headers:a,body:s,withCredentials:c,abortSignal:u,retryStrategy:l}=t,d=s?s instanceof FormData?s:JSON.stringify(s??""):void 0,h=((e,t)=>{const n={};for(const t in e)n[t.toLowerCase()]=e[t];if(t){const e=n["content-type"];e&&(e.startsWith("application/json")||e.startsWith("application/")&&e.includes("+json"))||(n["content-type"]="application/json; charset=UTF-8"),t instanceof FormData&&delete n["content-type"]}return n})(a,s),p={url:o,headers:h,method:i,body:d},f={retryDecider:di(l??e?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:lt,withCrossDomainCredentials:c,abortSignal:u},g=n(p,r);let y;const b=await hi(e);if(g&&b){const e=((e,t)=>{const{service:n=ii,region:r=ai}={},{hostname:o}=e,[,i,a]=si.exec(o)??[];return i===ii?{service:i,region:a??r}:"appsync-api"===i?{service:"appsync",region:a??r}:{service:n,region:r}})(o),t=r?.service??e.service,n=r?.region??e.region;y=await ui(p,{...f,credentials:b,region:n,service:t})}else y=await li(p,{...f});return{statusCode:y.statusCode,headers:y.headers,body:y.body}})(e,{url:t,method:"POST",...n,abortSignal:o.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},oi,n?.signingServiceInfo)),o),a=i.finally((()=>{pi.delete(a)}));return a},gi=e=>{const t=e.libraryOptions?.API?.GraphQL?.headers,n=e.libraryOptions?.API?.GraphQL?.withCredentials;return{headers:t,withCredentials:n}};class yi extends T{constructor(e){super(e),this.constructor=yi,Object.setPrototypeOf(this,yi.prototype)}}var bi;!function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(bi||(bi={})),Symbol("amplify"),Symbol("authMode"),Symbol("authToken"),Symbol("apiKey"),Symbol("headers"),Symbol("endpoint");const mi={name:"NoApiKey",message:bi.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},vi={name:"NoCredentials",message:bi.NO_CREDENTIALS,recoverySuggestion:'The API request was made with `authMode: "iam"` but no authentication credentials are available.\n\nIf you intended to make a request using an authenticated role, review if your user is signed in before making the request.\n\nIf you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the `Amplify.configure()` function.'},wi={name:"NoValidAuthTokens",message:bi.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},Si={name:"NoSignedUser",message:bi.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},_i={name:"NoAuthorizationHeader",message:bi.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},Ii="x-amz-user-agent";const Ei=new Set;async function ki(e,t){const n=Wo();n.authenticationType=Vo(t?.authMode,n.authenticationType),n.apiKey=t?.apiKey||n.apiKey,n.authToken=t?.authToken||n.authToken,await Ho.connect(n);const r=At();let o;return Ei.add(r),{subscribe:(t,i)=>{if(!Ei.has(r))throw new Error("Channel is closed");const a={...n,query:e};return a.authenticationType=Vo(i?.authMode,a.authenticationType),a.apiKey=i?.apiKey||a.apiKey,a.authToken=i?.authToken||a.authToken,o=Ho.subscribe(a).subscribe(t),o},close:async()=>{o&&o.unsubscribe(),Ei.delete(r),setTimeout((()=>{0===Ei.size&&Ho.closeIfNoActiveSubscription()}),1e3)},publish:async(t,o)=>{if(!Ei.has(r))throw new Error("Channel is closed");const i={...n,query:e,variables:t};return i.authenticationType=Vo(o?.authMode,i.authenticationType),i.apiKey=o?.apiKey||i.apiKey,i.authToken=o?.authToken||i.authToken,Ho.publish(i)}}}async function Ci(e,t,n){const r=Wo();r.authenticationType=Vo(n?.authMode,r.authenticationType),r.apiKey=n?.apiKey||r.apiKey,r.authToken=n?.authToken||r.authToken;const o="/"===e[0]?e:`/${e}`,i={...r,query:o,variables:qo(t)},a=new AbortController,s=await async function(e,t,n={},r,o){const{region:i,appSyncGraphqlEndpoint:a,authenticationType:s,query:c,variables:u}=t;if(!a)throw new Error("No endpoint");const{withCredentials:l}=gi(e),d=await async function(e,t,n,r){const{apiKey:o,appSyncGraphqlEndpoint:i,authenticationType:a,query:s,variables:c,authToken:u}=t,{headers:l}=gi(e);let d;if("function"==typeof n){const e={method:"POST",url:new sn(i).toString(),queryString:s};d=await n(e)}else d=n;u&&(d={...d,Authorization:u});const h=await async function(e,t,n,r={}){let o={};switch(t){case"apiKey":if(!n)throw new yi(mi);o={"X-Api-Key":n};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new yi(vi);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(e){throw new yi({...Si,underlyingError:e})}if(!t)throw new yi(wi);o={Authorization:t};break}case"lambda":if("object"==typeof r&&!r.Authorization)throw new yi(_i);o={Authorization:r.Authorization}}return o}(e,a,o,d);return{...h,...l&&await l({query:s,variables:c}),...d,[Ii]:tt(r)}}(e,t,n,o),h={channel:c,events:u},p=["apiKey","none"].includes(s)?void 0:{service:"appsync",region:i},{body:f}=await fi(e,{url:new sn(a),options:{headers:d,body:h,signingServiceInfo:p,withCredentials:l},abortController:r}),g=await f.json();if(function(e){if(!e)return!1;const t=e;return Array.isArray(t.errors)&&t.errors.length>0}(g))throw(y=g).errors&&Array.isArray(y.errors)&&y.errors.forEach((e=>{var t;t=e,(t?.originalError?.name?.startsWith("UnauthorizedException")||t.message?.startsWith("Connection failed:")&&t.message?.includes("Permission denied"))&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")})),y;var y;return g}(ke,i,{},a);if(s.failed?.length>0)return s.failed}function Ai(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,E.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pi,Ni,Ri="sockr.birdie.so";function Di(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.onMessage,a=n.onStatus,c=n.bootstrap,l=n.bootstrapUrl,d=void 0===l?"":l,h=(n.fetchInit,n.ctx),p=void 0===h?{}:h,f=!1,g="disconnected",y=[],b=null,m=null,v=null,w=null,S=null,_=null,I=null,E=null,k=null,C=null,A=null,O="",T=new Map,x=null,P=!1,N=0,R=0,D=0,L=null,M=6e4;function U(){return Date.now()}function j(){N=U()}function K(){if("undefined"==typeof document)return!0;var e="visible"===document.visibilityState,t="function"!=typeof document.hasFocus||document.hasFocus();return e||t}function G(){L&&clearInterval(L),L=null}function $(){f||x||q().catch((function(){}))}function B(e){return F.apply(this,arguments)}function F(){return F=i(u().mark((function e(t){var n,r,o,i,a,s,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(d),e.next=3,fetch(n,{method:"GET",credentials:"omit"});case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("bootstrap failed: ".concat(r.status));case 6:return e.next=8,r.json();case 8:return o=e.sent,r.headers.has("x-viewer-ip")&&(i=r.headers.get("x-viewer-ip"),a=i.replace(/[.:]/g,"-"),o.ip=i,s=a+"-"+t.fg,o.session_id=s,c="/default/"+o.r1+"/"+s+"/"+t.tab_id,o.room=c),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function V(e){return W.apply(this,arguments)}function W(){return W=i(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof c){e.next=4;break}return e.next=3,c(t);case 3:case 8:return e.abrupt("return",e.sent);case 4:if(!c||"object"!==(0,r.A)(c)){e.next=6;break}return e.abrupt("return",c);case 6:return e.next=8,B(t);case 9:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function q(){return z.apply(this,arguments)}function z(){return z=i(u().mark((function e(){var t,n=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:p,!f){e.next=3;break}return e.abrupt("return");case 3:if(!x){e.next=5;break}return e.abrupt("return",x);case 5:return x=i(u().mark((function e(){var n,r,o,i,s,c,l,d,h,p,y,m,v,w;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(t);case 3:if(n=e.sent,r=n.h,o=n.room,i=n.be,s=n.ce,c=n.secs,l=n.silence,d=n.retry_after,h=n.r1,p=n.ip,y=n.session_id,(i||s)&&!l){e.next=19;break}return m={silence:l,retry_after:d},null==a||a("silence",m),A=null,e.abrupt("return");case 19:return b=r,o&&(v=o.split("/"),O=v.pop(),A=v.join("/")),e.next=23,H(r);case 23:g="connected",f=!0,j(),G(),L=setInterval((function(){if(f){var e=Math.max(N,R,D);U()-e>=M&&!K()&&re(!0).catch((function(){}))}}),15e3),w={ce:s,be:i,silence:l,retry_after:d,room:o,secs:c,r1:h,ip:p,session_id:y,h:r},null==a||a(g,w),e.next=35;break;case 31:throw e.prev=31,e.t0=e.catch(0),null==a||a(e.t0),e.t0;case 35:return e.prev=35,x=null,e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,31,35,38]])})))(),e.abrupt("return",x);case 7:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function H(e){return J.apply(this,arguments)}function J(){return J=i(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=i(u().mark((function e(n,s){var c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:if(!T.has(n)){e.next=4;break}return e.abrupt("return");case 4:if(!T.has(n)){e.next=6;break}return e.abrupt("return");case 6:return T.set(n,"PENDING"),e.next=9,ki(s,{authMode:"apiKey",apiKey:t});case 9:(c=e.sent).subscribe({next:function(e){var t;if(e&&"object"===(0,r.A)(e)&&"ka"===e.type)R=U();else{j();var i=null;try{i="string"==typeof(null==e?void 0:e.event)?JSON.parse(e.event):null==e?void 0:e.event}catch(e){}"recorder"===(null===(t=i)||void 0===t?void 0:t.sender)&&(D=U());var a={event:i,id:null==e?void 0:e.id,type:null==e?void 0:e.type};y.push(xi(xi({},a),{},{__channel:s,__label:n})),null==o||o(a)}},error:function(){var e=i(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie(t)){e.next=14;break}return e.prev=1,e.next=4,re(!0);case 4:return e.next=6,X(p,!0);case 6:return e.next=8,q(p);case 8:return e.abrupt("return");case 11:e.prev=11,e.t0=e.catch(1),console.error("events subscribe error",t);case 14:g="error",null==a||a(t);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}),T.set(n,c);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=3,n("room",A);case 3:return e.next=5,n("personal",A+"/"+O);case 5:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function X(){return Q.apply(this,arguments)}function Q(){return Q=i(u().mark((function e(){var t,n,r,o,i,a,s,c,l,d,h,f,g,y=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:p,!(y.length>1&&void 0!==y[1]&&y[1])&&b){e.next=27;break}return e.next=5,V(t);case 5:n=e.sent,r=n.h,o=n.room,i=n.be,a=n.ce,s=n.secs,c=n.silence,l=n.retry_after,d=n.r1,h=n.ip,f=n.session_id,b=r,m=o,v=i,w=a,S=s,_=c,I=l,E=d,k=h,C=f,o?(g=o.split("/"),O=g.pop(),A=g.join("/")):A=null;case 27:return e.abrupt("return",{h:b,room:m,be:v,ce:w,secs:S,silence:_,retry_after:I,r1:E,ip:k,session_id:C});case 28:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return Z=i(u().mark((function e(t){var n,r,o,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:p,f&&A){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,X(n);case 5:return r=e.sent,o=r.h,e.next=9,Ci(A,xi(xi({},t),{},{sender:O}),{authMode:"apiKey",apiKey:o});case 9:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return te=i(u().mark((function e(t,n){var r,o,i,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:p,f&&A){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=5;break}throw new Error("No personal channel configured");case 5:return e.next=7,X(r);case 7:return o=e.sent,i=o.h,e.next=11,Ci(A+"/"+n,xi(xi({},t),{},{sender:O}),{authMode:"apiKey",apiKey:i});case 11:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(){return ne=i(u().mark((function e(t){var n,r,o=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:"room",r=o.length>2&&void 0!==o[2]?o[2]:p,f){e.next=4;break}return e.abrupt("return");case 4:if(t.sender=O,"room"!==n){e.next=9;break}return e.abrupt("return",Y(t,r));case 9:return e.abrupt("return",ee(t,n,r));case 10:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(){return oe.apply(this,arguments)}function oe(){return oe=i(u().mark((function e(){var t,n,r,o,i,c,l=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]&&l[0],n=Ai(T),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=15;break}return o=s(r.value,2),i=o[1],e.prev=6,e.next=9,null==i||null===(c=i.close)||void 0===c?void 0:c.call(i);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n.e(e.t1);case 20:return e.prev=20,n.f(),e.finish(20);case 23:T.clear(),f=!1,g="disconnected",G(),t||null==a||a(g);case 28:case"end":return e.stop()}}),e,null,[[2,17,20,23],[6,11]])}))),oe.apply(this,arguments)}function ie(e){var t=((null==e?void 0:e.message)||"").toLowerCase();return t.includes("unauthorized")||t.includes("forbidden")||t.includes("401")||t.includes("403")}return"undefined"==typeof window||P||(P=!0,window.addEventListener("focus",$,{capture:!0}),window.addEventListener("pageshow",$),null===(e=(t=document).addEventListener)||void 0===e||e.call(t,"visibilitychange",(function(){K()&&$()}))),{connected:f,status:g,messages:y,connect:q,publish:function(e){return ne.apply(this,arguments)},disconnect:re}}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bn.configure({API:{Events:{endpoint:"https://".concat(Ri,"/event"),realtimeEndpoint:"wss://".concat(Ri,"/event/realtime"),region:"us-east-2",defaultAuthMode:"apiKey"}}});var Mi=n(503),Ui=void 0,ji=!0,Ki=!1,Gi="https://app.birdie.so",$i="https://app.birdie.so/api/v1",Bi="https://cf.birdie.so/api/v1",Fi="wsauth",Vi="https://cdn.birdie.so/widget/embed/css/main2.css",Wi="https://cdn.birdie.so",qi=Wi.startsWith("https://birdie.eu.ngrok.io")?"/":"/widget/embed/",zi=0,Hi=0,Ji=0,Xi=0,Qi=!0,Yi=!1,Zi=null,ea=0,ta=new URLSearchParams(window.location.search).get("birdie_snippet_test"),na="";sessionStorage.getItem("zestSession")?na=sessionStorage.getItem("zestSession"):(na=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),sessionStorage.setItem("zestSession",na)),window.__birdie_pristine_natives||(window.__birdie_pristine_natives={fetch:window.fetch,xhr:{open:XMLHttpRequest.prototype.open,send:XMLHttpRequest.prototype.send,setRequestHeader:XMLHttpRequest.prototype.setRequestHeader},console:{log:console.log,info:console.info,warn:console.warn,error:console.error,debug:console.debug},history:{pushState:history.pushState,replaceState:history.replaceState},tabId:na},Object.freeze(window.__birdie_pristine_natives));var ra=document.currentScript,oa=function(){if(ra&&ra.src){var e,t=ra.src,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Li(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(new URLSearchParams(t.split("?")[1]).entries());try{for(r.s();!(e=r.n()).done;){var o=s(e.value,2),i=o[0],a=o[1];n[i]=a}}catch(e){r.e(e)}finally{r.f()}return n}return{}}(),ia=null!==(Pi=oa.slug)&&void 0!==Pi?Pi:"",aa=null!==(Ni=oa.wk)&&void 0!==Ni?Ni:"";"e4bf56a2"==ia&&"/widget/embed/"==qi&&(qi="/widget/embed_birdie/",Vi=Vi.replace("/widget/embed/","/widget/embed_birdie/"),(window.location.href.includes("https://www.birdie.so/security")||window.location.href.includes("https://app.birdie.test")||window.location.href.includes("https://staging.birdie.so")||window.location.href.includes("https://mysportbeez.com"))&&(Gi=Gi.replace("https://app.birdie.so","https://staging.birdie.so"),$i=$i.replace("https://app.birdie.so","https://staging.birdie.so"))),["e4bf56a2","rlaadmux","sqfrzpes","kmcnhfm3"].includes(ia)&&(Fi="wsauth_nocache");var sa=g({enableWebgl:!1,debug:!1,enableScreen:!1}),ca=(new Date).getTimezoneOffset(),ua=Intl.DateTimeFormat().resolvedOptions().timeZone,la={description:Mi.description,name:"",mobile:window.matchMedia("(pointer:coarse)").matches,os:{family:Mi.os.family},timezone:ua,timezoneOffset:ca,language:window.navigator.language,tabTitle:document.title,has_focus:document.hasFocus(),is_visible:"hidden"!=document.visibilityState,tabUrl:JSON.parse(JSON.stringify(window.location)),width:window.innerWidth,height:window.innerHeight,vpn_detected:!1,session_id:""};function da(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+window.location.pathname}var ha=document.createElement("link");ha.href=Vi,ha.rel="stylesheet",document.head.append(ha);var pa,fa=!1,ga=!1,ya=null,ba=!1,ma="",va=function(){var e={};return window.intercomSettings?(window.intercomSettings.name&&(e.name=window.intercomSettings.name),window.intercomSettings.email&&!e.email&&(e.email=window.intercomSettings.email)):window.intercomSettings={},window.birdieSettings||(window.zestSettings?window.birdieSettings=window.zestSettings:window.birdieSettings={contact:{}}),window.birdieSettings&&(window.birdieSettings.contact_id&&(e.id=window.birdieSettings.contact_id),window.birdieSettings.contact_name&&(e.name=window.birdieSettings.contact_name),window.birdieSettings.contact_email&&(e.email=window.birdieSettings.contact_email),window.birdieSettings.contact_phone&&(e.phone=window.birdieSettings.contact_phone)),e}();(pa=va)&&0===Object.keys(pa).length&&Object.getPrototypeOf(pa)===Object.prototype||(la.contact=va);var wa,Sa=(wa={},window.birdieSettings||(window.zestSettings?window.birdieSettings=window.zestSettings:window.birdieSettings={metadata:{}}),window.birdieSettings&&window.birdieSettings.metadata&&"object"===(0,r.A)(window.birdieSettings.metadata)&&(wa=window.birdieSettings.metadata),wa),_a=null,Ia=null,Ea=void 0,ka=!1;function Ca(){return Date.now()+ea}var Aa=null;function Oa(){return Oa=i(u().mark((function e(){var t,n,r,o,i,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="birdie::session::".concat(ia),n=Ca(),r=JSON.parse(localStorage.getItem(t)||"null"),o=null,!(r&&r.until>n)){e.next=12;break}if(!r.data){e.next=12;break}if(!r.data.silence){e.next=11;break}return Aa=null,Ta({data:{silence:!0}}),e.abrupt("return");case 11:o=r.data;case 12:return i=Di({bootstrapUrl:Bi+"/"+Fi+"/"+ia,bootstrap:o,ctx:{app_id:ia,tab_id:na,fg:sa,tech:"as"},fetchInit:{credentials:"include"},onMessage:function(e){Va(e)},onStatus:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"connected"==e&&r?(Aa=s,Ta({data:r})):"silence"==e&&(Aa=null,Ta({data:{silence:!0}})),r&&r.retry_after&&null==o&&localStorage.setItem(t,JSON.stringify({until:n+(1e3*r.retry_after||6e4),data:r}))}}),a=i.connect,s=i.publish,e.next=16,a();case 16:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Ta(e){if(!0===e.data.silence)return console.log("[Birdie] is disabled"),void(ta&&alert("Birdie test: snippet is successfully installed, but is disabled in your Birdie account."));ta&&alert("Birdie test: snippet is successfully installed."),function(){return Qa.apply(this,arguments)}().then((function(t){Zi=t,_a=e.data.r1,ga=e.data.ce,fa=e.data.be,ma=e.data.secs,e.data.ip,ya=e.data.session_id,ji&&((ga||fa)&&(window.addEventListener("blur",La),window.addEventListener("focus",Ma),document.addEventListener("visibilitychange",ja),document.addEventListener("securitypolicyviolation",(function(e){if(e.blockedURI&&e.blockedURI.includes(".birdie.so"))switch(console.error("[Birdie] CSP Violation detected for domain:",e.blockedURI),console.info("[Birdie] Violated Directive:",e.violatedDirective),console.info("[Birdie] Original Policy:",e.originalPolicy),window.birdie.emit("error",{message:"securitypolicyviolation",blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,originalPolicy:e.originalPolicy}),e.violatedDirective){case"script-src":console.warn("[Birdie] A script from",e.blockedURI,"was blocked. Consider updating the script-src directive.");break;case"style-src":console.warn("[Birdie] A style from",e.blockedURI,"was blocked. Consider updating the style-src directive.");break;case"img-src":console.warn("[Birdie] An image from",e.blockedURI,"was blocked. Consider updating the img-src directive.");break;default:console.warn("[Birdie] Resource from",e.blockedURI,"was blocked due to CSP policy.")}}))),fa&&I.initialize(fa,ma),Aa&&Aa({event:"connected",event_value:"connected"},"recorder"),Ra({action:"set_data",params:{session_id:ya,tab_id:na,team_id:_a}}),"wsauth_nocache"==Fi&&Da(),ji=!1)}))}function xa(){return Pa.apply(this,arguments)}function Pa(){return(Pa=i(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Wi+qi+aa,e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.text();case 7:r=e.sent,Na(new Blob([r],{type:"application/javascript"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("[Birdie] Error creating web worker:",e.t0),window.birdie.emit("error",{message:"Error creating web worker "+e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Na(){var e,t,r,o,i,a,s,c,u,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(){var e=!1;if(null==document.getElementById("birdie-remote")&&window!==window.parent&&window.parent)try{e=void 0!==window.parent.birdieSettings||void 0!==window.parent.zestSettings}catch(t){e=!0}return e}()?(e=navigator.userAgent||"",t=navigator.platform||"",r=Number(navigator.maxTouchPoints||0),o=!(!navigator.userAgentData||!navigator.userAgentData.mobile),i=/\b(iPhone|iPod)\b/i.test(e),a=/Android/i.test(e)&&/Mobile/i.test(e),s=/\b(Windows Phone|BlackBerry)\b/i.test(e),c=/\biPad\b/i.test(e),u="MacIntel"===t&&r>1&&/\bSafari\b/i.test(e)&&!/\b(Chrome|CriOS|FxiOS|EdgiOS|OPiOS)\b/i.test(e),o||i||a||s||c||u?console.log("[Birdie] Skipping snippet on mobile browser."):ka||(void 0!==l?(ka=!0,(Ea=void 0===l?new Worker(new URL(n.p+n.u(883),n.b),{type:void 0}):new Worker(URL.createObjectURL(l))).addEventListener("message",(function(e){var t=e.data;if(t.action){if("worker_registered"==t.action)return void function(){Oa.apply(this,arguments)}();if("axios"==t.action&&t.error)return console.error("[Birdie] Error connecting to backend: "+t.error),void window.birdie.emit("error",{message:"Error connecting to backend: "+t.error})}}),!1)):xa())):console.log("[Birdie] Skipping snippet in child frames.")}function Ra(e){Ea?Ea.postMessage(e):Ua()}function Da(){var e=Gi+"/"+Fi+"/"+_a+"/fresh",t={browser_data:la,tab_id:na,team_id:_a,session_id:ya,type:"snippet",fingerprint:sa,metadata:Sa};Xi&&(t.recorder_start_timestamp=Xi),Ra({action:"axios",actionId:"sync_browserdata_to_backend",endpoint:e,params:t})}function La(){ga&&Ui&&Ui.event_blur(),Ka()}function Ma(){ga&&Ui&&Ui.event_focus(),Ka()}function Ua(){void 0===Ea&&ka&&(ka=!1,xa())}function ja(){if(Ua(),"hidden"==document.visibilityState){if(La(),Ki)return}else if(Ki)return;Ka()}function Ka(){var e="hidden"!=document.visibilityState,t=document.hasFocus();la.has_focus!=t&&(la.has_focus=t,Xa("focus")),la.is_visible!=e&&(la.is_visible=e,Xa("focus"))}Na();var Ga=null,$a=null,Ba=Date.now();function Fa(e){"disconnected"!=e&&"function"==typeof Aa&&(Ba=Date.now(),clearTimeout($a),$a=setTimeout((function(){Date.now()-Ba>=1e4&&!document.hidden?(clearTimeout($a),clearTimeout(Ga),Va({event:{event:"disconnected",event_value:!0,sender:"recorder"}},!0)):Fa("poke")}),1e4),clearTimeout(Ga),Ga=setTimeout((function(){clearTimeout(Ga),Aa({event:"ping",event_value:!0},"recorder")}),5e3))}function Va(e){return Wa.apply(this,arguments)}function Wa(){return Wa=i(u().mark((function e(t){var r,o,i,a,s,c=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]&&c[1],1==_a&&console.log("ws_remote_message_received",t),"recorder"==(o={message:t.event,sender:t.event.sender}).sender){e.next=6;break}return e.abrupt("return");case 6:if(Fa(i=o.message.event),"pong"!=i){e.next=10;break}return e.abrupt("return");case 10:if(Ia=ya,la.session_id=Ia,r||Xa("browser_data"),Ui&&Ui.setSessionId(Ia),"disconnected"!=i&&"pause-recording"!=i){e.next=18;break}return"pause-recording"==i&&((Yi=!0)&&(Ui&&Ui.pause(),Hi=Ca(),setTimeout((function(){Ra({action:"pause_logs"})}),1e3)),window.birdie.emit("pause",{timestamp:Ca(),session_id:Ia})),"disconnected"==i&&(I.is_secured()&&I.zest_secure_ui(!1),Yi=!1,Ui&&(Ui.stop(),Ra({action:"stop_logs"})),clearTimeout($a),clearTimeout(Ga),window.birdie.emit("recorderClose",{timestamp:Ca()})),e.abrupt("return");case 18:if("opened"!=i){e.next=21;break}return window.birdie.emit("recorderOpen",{timestamp:Ca()}),e.abrupt("return");case 21:if("sharingLink"!=i){e.next=24;break}return window.birdie.emit("recordingSent",{timestamp:Ca(),link:o.message.event_value}),e.abrupt("return");case 24:if("resume-recording"!=i){e.next=29;break}return window.birdie.emit("resume",{timestamp:Ca(),session_id:Ia}),Yi=!0,qa(o),e.abrupt("return");case 29:if(!fa||"client-blur"!=i){e.next=33;break}return window.birdie.emit("blur",{timestamp:Ca(),session_id:Ia,enabled:null!==(a=o.message.event_value)&&void 0!==a&&a}),I.zest_secure_ui(null!==(s=o.message.event_value)&&void 0!==s&&s),e.abrupt("return");case 33:if(!ga||"client-recording"!=i){e.next=45;break}if("start"!=o.message.event_value||r){e.next=38;break}return e.next=37,void 0,void 0,u=Gi+"/"+Fi+"/"+ia+"/timesync",l=Date.now(),fetch("".concat(u,"?ts=").concat(l),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){ea=e&&"number"==typeof e.diff?e.diff:0})).catch((function(){ea=0}));case 37:Ea.postMessage({action:"sync_server_timestamp",params:{server_delta_ms:ea}});case 38:if(void 0!==Ui){e.next=41;break}return n.e(352).then(n.bind(n,216)).then((function(e){var n="".concat(Wi).concat(qi).concat(Zi["birdie_logger.js"]);Ui=new e.default(na,za,Ia,_a,ba,Qi,n,ea),Va(t,!0)})),e.abrupt("return");case 41:return"start"==o.message.event_value&&(o.message.start_timestamp&&(Xi=o.message.start_timestamp),Da()),"start"==o.message.event_value?(window.birdie.emit("start",{timestamp:Ca(),session_id:Ia}),Yi=!0,zi=0,Hi=0,Ji=Ca(),Qi||(Hi=Ca())):"stop"==o.message.event_value?(window.birdie.emit("stop",{timestamp:Ca(),session_id:Ia}),Yi=!1):"restart"==o.message.event_value&&(window.birdie.emit("restart",{timestamp:Ca(),session_id:Ia}),zi=0,Hi=0),Ui&&("start"!=o.message.event_value||Ui.sending_enabled()?"stop"==o.message.event_value&&Ui.sending_enabled()?(Ui.stop(),Ra({action:"stop_logs"}),window.birdie.emit("captureStopped",{timestamp:Ca(),session_id:Ia})):"restart"!=o.message.event_value||Ui.sending_enabled()||(zi=0):(zi=0,Hi=0,Ji=Ca(),Ra({action:"start_logs"}),Ui.start(),window.birdie.emit("captureStarted",{timestamp:Ca(),session_id:Ia}))),e.abrupt("return");case 45:case"end":return e.stop()}var u,l}),e)}))),Wa.apply(this,arguments)}function qa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Yi){var t=Ca()-Hi;zi+=t,e&&e.message&&e.message.event_value&&Ji-Hi<1e3&&(zi=e.message.event_value),Hi=0,Ra({action:"resume_logs"}),Ui&&Ui.resume(t)}}function za(e){e.session_id=Ia,e.recorder_start_timestamp=Xi,e.team_id=_a,e.has_focus=la.has_focus,e.is_visible=la.is_visible,e.is_v2=!0,e.data&&(e.data.has_focus=la.has_focus),zi>0&&(e.timestamp?e.timestamp-=zi:e.data&&e.data.timestamp&&(e.data.timestamp-=zi)),Ra({action:"save_logs",params:e})}var Ha=null,Ja=null;function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(("focus"!=e&&"visible"!=e||Ha)&&null!=Ja){var t={};if("connectionId2"==e)t.connectionId=Ja;else if("contact"==e){var n,r,o,i,a,s,c,u,l;t={contact_name:null!==(n=null===(r=la.contact)||void 0===r?void 0:r.name)&&void 0!==n?n:null,contact_email:null!==(o=null===(i=la.contact)||void 0===i?void 0:i.email)&&void 0!==o?o:null,contact_phone:null!==(a=null===(s=la.contact)||void 0===s?void 0:s.phone)&&void 0!==a?a:null,contact_id:null!==(c=null===(u=la.contact)||void 0===u?void 0:u.id)&&void 0!==c?c:null,tabUrl:da(null===(l=la.tabUrl)||void 0===l||l.href),tabTitle:la.tabTitle,has_focus:la.has_focus}}else if("browser_data"==e)t={browser_data:la};else if("metadata"==e)t={metadata:Sa};else if("title"==e)t={tabTitle:la.tabTitle};else if("location"==e){var d;t={tabUrl:da(null===(d=la.tabUrl)||void 0===d||d.href)}}else if("focus"==e)t={has_focus:la.has_focus};else if("visible"==e)t={is_visible:la.is_visible};else{if("resize"!=e)return;t={has_focus:la.has_focus}}}}function Qa(){return(Qa=i(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Wi).concat(qi,"manifest.json"),e.next=3,fetch(t);case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Failed to load manifest: ".concat(n.statusText));case 6:return e.abrupt("return",n.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ya={events:{},on:function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},off:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter((function(e){return e!==t})))},emit:function(e,t){this.events[e]&&this.events[e].forEach((function(e){return e(t)}))}},Za=!1;Za||(window.birdie={get settings(){return window.birdieSettings||{}},get contact(){return la.contact},set contact(e){window.birdieSettings||(window.birdieSettings={contact:{}}),window.birdieSettings.contact=e,la.contact=e,Xa("contact")},get metadata(){return Sa},set metadata(e){window.birdieSettings||(window.birdieSettings={metadata:{}}),window.birdieSettings.metadata=e,Sa=e,Xa("metadata")},on:Ya.on.bind(Ya),off:Ya.off.bind(Ya),emit:Ya.emit.bind(Ya),get captureLogs(){return Qi},set captureLogs(e){var t=!!e;t!=Qi&&(Qi=t,Ui&&Ui.setLoggingEnabled(Qi))}},Za=!0,window.birdieSettings&&window.birdieSettings.onBirdieReady&&"function"==typeof window.birdieSettings.onBirdieReady&&(0,window.birdieSettings.onBirdieReady)())},140:(e,t,n)=>{"use strict";var r=n(918),o=Object.create(null),i="undefined"==typeof document,a=Array.prototype.forEach;function s(){}function c(e,t){if(!t){if(!e.href)return;t=e.href.split("?")[0]}if(l(t)&&!1!==e.isLoaded&&t&&t.indexOf(".css")>-1){e.visited=!0;var n=e.cloneNode();n.isLoaded=!1,n.addEventListener("load",(function(){n.isLoaded||(n.isLoaded=!0,e.parentNode.removeChild(e))})),n.addEventListener("error",(function(){n.isLoaded||(n.isLoaded=!0,e.parentNode.removeChild(e))})),n.href="".concat(t,"?").concat(Date.now()),e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n)}}function u(){var e=document.querySelectorAll("link");a.call(e,(function(e){!0!==e.visited&&c(e)}))}function l(e){return!!/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e)}e.exports=function(e,t){if(i)return console.log("no window.document found, will not HMR CSS"),s;var n,d,h=function(e){var t=o[e];if(!t){if(document.currentScript)t=document.currentScript.src;else{var n=document.getElementsByTagName("script"),i=n[n.length-1];i&&(t=i.src)}o[e]=t}return function(e){if(!t)return null;var n=t.split(/([^\\/]+)\.js$/),o=n&&n[1];return o&&e?e.split(",").map((function(e){var n=new RegExp("".concat(o,"\\.js$"),"g");return r(t.replace(n,"".concat(e.replace(/{fileName}/g,o),".css")))})):[t.replace(".js",".css")]}}(e);return n=function(){var e=h(t.filename),n=function(e){if(!e)return!1;var t=document.querySelectorAll("link"),n=!1;return a.call(t,(function(t){if(t.href){var o=function(e,t){var n;return e=r(e),t.some((function(r){e.indexOf(t)>-1&&(n=r)})),n}(t.href,e);l(o)&&!0!==t.visited&&o&&(c(t,o),n=!0)}})),n}(e);if(t.locals)return console.log("[HMR] Detected local css modules. Reload all css"),void u();n?console.log("[HMR] css reload %s",e.join(" ")):(console.log("[HMR] Reload all css"),u())},50,d=0,function(){var e=this,t=arguments;clearTimeout(d),d=setTimeout((function(){return n.apply(e,t)}),50)}}},918:e=>{"use strict";e.exports=function(e){if(e=e.trim(),/^data:/i.test(e))return e;var t=-1!==e.indexOf("//")?e.split("//")[0]+"//":"",n=e.replace(new RegExp(t,"i"),"").split("/"),r=n[0].toLowerCase().replace(/\.$/,"");return n[0]="",t+r+n.reduce((function(e,t){switch(t){case"..":e.pop();break;case".":break;default:e.push(t)}return e}),[]).join("/")}},211:(e,t,n)=>{"use strict";var r,o;r=void 0,o=n(140)(e.id,{}),e.hot.data&&e.hot.data.value&&e.hot.data.value!==r?e.hot.invalidate():e.hot.accept(),e.hot.dispose((function(e){e.value=r,o()}))},503:function(e,t,n){var r;e=n.nmd(e),function(){"use strict";var o={function:!0,object:!0},i=o[typeof window]&&window||this,a=o[typeof t]&&t,s=o.object&&e&&!e.nodeType&&e,c=a&&s&&"object"==typeof n.g&&n.g;!c||c.global!==c&&c.window!==c&&c.self!==c||(i=c);var u=Math.pow(2,53)-1,l=/\bOpera/,d=Object.prototype,h=d.hasOwnProperty,p=d.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=w(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function y(e,t){for(var n in e)h.call(e,n)&&t(e[n],n,e)}function b(e){return null==e?f(e):p.call(e).slice(8,-1)}function m(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)t(e[n],n);else y(e,t)}(e,(function(r,o){n=t(n,r,o,e)})),n}function w(e){return String(e).replace(/^ +| +$/g,"")}var S=function e(t){var n=i,r=t&&"object"==typeof t&&"String"!=b(t);r&&(n=t,t=null);var o=n.navigator||{},a=o.userAgent||"";t||(t=a);var s,c,u,d,h,f=r?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(p.toString()),S="Object",_=r?S:"ScriptBridgingProxyObject",I=r?S:"Environment",E=r&&n.java?"JavaPackage":b(n.java),k=r?S:"RuntimeObject",C=/\bJava/.test(E)&&n.java,A=C&&b(n.environment)==I,O=C?"a":"",T=C?"b":"",x=n.document||{},P=n.operamini||n.opera,N=l.test(N=r&&P?P["[[Class]]"]:b(P))?N:P=null,R=t,D=[],L=null,M=t==a,U=M&&P&&"function"==typeof P.version&&P.version(),j=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)})),K=v(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(t)&&(n.label||n)})),G=F([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),$=v({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(e,n,r){return e||(n[G]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(G)]||RegExp("\\b"+m(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r})),B=v(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var r=n.pattern||m(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}));function F(e){return v(e,(function(e,n){var r=n.pattern||m(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=g(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function V(e){return v(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(j&&(j=[j]),/\bAndroid\b/.test(B)&&!G&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(G=w(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),$&&!G?G=F([$]):$&&G&&(G=G.replace(RegExp("^("+m($)+")[-_.\\s]","i"),$+" ").replace(RegExp("^("+m($)+")[-_.]?(\\w)","i"),$+" $2")),(s=/\bGoogle TV\b/.exec(G))&&(G=s[0]),/\bSimulator\b/i.test(t)&&(G=(G?G+" ":"")+"Simulator"),"Opera Mini"==K&&/\bOPiOS\b/.test(t)&&D.push("running in Turbo/Uncompressed mode"),"IE"==K&&/\blike iPhone OS\b/.test(t)?($=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,G=s.product):/^iP/.test(G)?(K||(K="Safari"),B="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==K&&/^Linux\b/i.test(B)?B="Kubuntu":$&&"Google"!=$&&(/Chrome/.test(K)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(G))||/\bAndroid\b/.test(B)&&/^Chrome/.test(K)&&/\bVersion\//i.test(t)?(K="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==K?(/\bMobi/i.test(t)||(B="Android",D.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&D.unshift("accelerated")):"UC Browser"==K&&/\bUCWEB\b/.test(t)?D.push("speed mode"):"PaleMoon"==K&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?D.push("identifying as Firefox "+s[1]):"Firefox"==K&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(B||(B="Firefox OS"),G||(G=s[1])):!K||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(K))?(K&&!G&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(K=null),(s=G||$||B)&&(G||$||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(K=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:s)+" Browser")):"Electron"==K&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&D.push("Chromium "+s),U||(U=V(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",m(K),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==j&&parseFloat(U)>3?"WebKit":/\bOpera\b/.test(K)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(t)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(K)&&"NetFront")&&(j=[s]),"IE"==K&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(K+=" Mobile",B="Windows Phone "+(/\+$/.test(s)?s:s+".x"),D.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(K="IE Mobile",B="Windows Phone 8.x",D.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=K&&"Trident"==j&&(s=/\brv:([\d.]+)/.exec(t))&&(K&&D.push("identifying as "+K+(U?" "+U:"")),K="IE",U=s[1]),M){if(d="global",h=null!=(u=n)?typeof u[d]:"number",/^(?:boolean|number|string|undefined)$/.test(h)||"object"==h&&!u[d])b(s=n.runtime)==_?(K="Adobe AIR",B=s.flash.system.Capabilities.os):b(s=n.phantom)==k?(K="PhantomJS",U=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof x.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(U=[U,x.documentMode],(s=+s[1]+4)!=U[1]&&(D.push("IE "+U[1]+" mode"),j&&(j[1]=""),U[1]=s),U="IE"==K?String(U[1].toFixed(1)):U[0]):"number"==typeof x.documentMode&&/^(?:Chrome|Firefox)\b/.test(K)&&(D.push("masking as "+K+" "+U),K="IE",U="11.0",j=["Trident"],B="Windows");else if(C&&(R=(s=C.lang.System).getProperty("os.arch"),B=B||s.getProperty("os.name")+" "+s.getProperty("os.version")),A){try{U=n.require("ringo/engine").version.join("."),K="RingoJS"}catch(e){(s=n.system)&&s.global.system==n.system&&(K="Narwhal",B||(B=s[0].os||null))}K||(K="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(D.push("Node "+s.versions.node),K="Electron",U=s.versions.electron):"string"==typeof s.versions.nw&&(D.push("Chromium "+U,"Node "+s.versions.node),K="NW.js",U=s.versions.nw)),K||(K="Node.js",R=s.arch,B=s.platform,U=(U=/[\d.]+/.exec(s.version))?U[0]:null));B=B&&g(B)}if(U&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(M&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(L=/b/i.test(s)?"beta":"alpha",U=U.replace(RegExp(s+"\\+?$"),"")+("beta"==L?T:O)+(/\d+\+?/.exec(s)||"")),"Fennec"==K||"Firefox"==K&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(B))K="Firefox Mobile";else if("Maxthon"==K&&U)U=U.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(G))"Xbox 360"==G&&(B=null),"Xbox 360"==G&&/\bIEMobile\b/.test(t)&&D.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(K)&&(!K||G||/Browser|Mobi/.test(K))||"Windows CE"!=B&&!/Mobi/i.test(t))if("IE"==K&&M)try{null===n.external&&D.unshift("platform preview")}catch(e){D.unshift("embedded")}else(/\bBlackBerry\b/.test(G)||/\bBB10\b/.test(t))&&(s=(RegExp(G.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||U)?(B=((s=[s,/BB10/.test(t)])[1]?(G=null,$="BlackBerry"):"Device Software")+" "+s[0],U=null):this!=y&&"Wii"!=G&&(M&&P||/Opera/.test(K)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==K&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==K&&(B&&!/^Win/.test(B)&&U>5.5||/\bWindows XP\b/.test(B)&&U>8||8==U&&!/\bTrident\b/.test(t)))&&!l.test(s=e.call(y,t.replace(l,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),l.test(K)?(/\bIE\b/.test(s)&&"Mac OS"==B&&(B=null),s="identify"+s):(s="mask"+s,K=N?g(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(B=null),M||(U=null)),j=["Presto"],D.push(s));else K+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==K&&"+"==s[1].slice(-1)?(K="WebKit Nightly",L="alpha",U=s[1].slice(0,-1)):U!=s[1]&&U!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(U=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==j&&(j=["Blink"]),M&&(f||s[1])?(j&&(j[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),j&&(j[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==K&&(!U||parseInt(U)>45)?U=s:"Chrome"==K&&/\bHeadlessChrome/i.test(t)&&D.unshift("headless")),"Opera"==K&&(s=/\bzbov|zvav$/.exec(B))?(K+=" ",D.unshift("desktop mode"),"zvav"==s?(K+="Mini",U=null):K+="Mobile",B=B.replace(RegExp(" *"+s+"$"),"")):"Safari"==K&&/\bChrome\b/.exec(j&&j[1])?(D.unshift("desktop mode"),K="Chrome Mobile",U=null,/\bOS X\b/.test(B)?($="Apple",B="iOS 4.3+"):B=null):/\bSRWare Iron\b/.test(K)&&!U&&(U=V("Chrome")),U&&0==U.indexOf(s=/[\d.]+$/.exec(B))&&t.indexOf("/"+s+"-")>-1&&(B=w(B.replace(s,""))),B&&-1!=B.indexOf(K)&&!RegExp(K+" OS").test(B)&&(B=B.replace(RegExp(" *"+m(K)+" *"),"")),j&&!/\b(?:Avant|Nook)\b/.test(K)&&(/Browser|Lunascape|Maxthon/.test(K)||"Safari"!=K&&/^iOS/.test(B)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(K)&&j[1])&&(s=j[j.length-1])&&D.push(s),D.length&&(D=["("+D.join("; ")+")"]),$&&G&&G.indexOf($)<0&&D.push("on "+$),G&&D.push((/^on /.test(D[D.length-1])?"":"on ")+G),B&&(s=/ ([\d.+]+)$/.exec(B),c=s&&"/"==B.charAt(B.length-s[0].length-1),B={architecture:32,family:s&&!c?B.replace(s[0],""):B,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+s),"")),K&&(/\bWOW64\b/i.test(t)||M&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&D.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==K&&parseFloat(U)>=39&&(B.architecture=64),t||(t=null);var W={};return W.description=t,W.layout=j&&j[0],W.manufacturer=$,W.name=K,W.prerelease=L,W.product=G,W.ua=t,W.version=K&&U,W.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=e,W.toString=function(){return this.description||""},W.version&&D.unshift(U),W.name&&D.unshift(K),B&&K&&(B!=String(B).split(" ")[0]||B!=K.split(" ")[0]&&!G)&&D.push(G?"("+B+")":"on "+B),D.length&&(W.description=D.join(" ")),W}();i.platform=S,void 0===(r=function(){return S}.call(t,n,t,e))||(e.exports=r)}.call(this)},633:(e,t,n)=>{var r=n(738).default;function o(){"use strict";e.exports=o=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new R(r||[]);return s(i,"_invoke",{value:T(e,n,a)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var g="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function w(){}function S(){}function _(){}var I={};h(I,u,(function(){return this}));var E=Object.getPrototypeOf,k=E&&E(E(D([])));k&&k!==i&&a.call(k,u)&&(I=k);var C=_.prototype=w.prototype=Object.create(I);function A(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,i,s,c){var u=f(e[o],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var o;s(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function T(e,n,r){var o=g;return function(i,a){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=x(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=b;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?m:y,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(a.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return S.prototype=_,s(C,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:S,configurable:!0}),S.displayName=h(_,d,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,h(e,d,"GeneratorFunction")),e.prototype=Object.create(C),e},n.awrap=function(e){return{__await:e}},A(O.prototype),h(O.prototype,l,(function(){return this})),n.AsyncIterator=O,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new O(p(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(C),h(C,d,"Generator"),h(C,u,(function(){return this})),h(C,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=D,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,n)=>{var r=n(633)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},848:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(816);function o(e,t,n){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},816:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(284);function o(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=(0,r.A)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==(0,r.A)(t)?t:t+""}},284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})}},r={};function o(e){var t=r[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var i=r[e]={id:e,loaded:!1,exports:{}};try{var a={id:e,module:i,factory:n[e],require:o};o.i.forEach((function(e){e(a)})),i=a.module,a.factory.call(i.exports,i,i.exports,a.require)}catch(e){throw i.error=e,e}return i.loaded=!0,i.exports}o.m=n,o.c=r,o.i=[],o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>(352===e?"birdielogger":e)+"."+{352:"78bf3924b25974f62264",883:"75306acac9a7b219b30a"}[e]+".js",o.hu=e=>e+"."+o.h()+".hot-update.js",o.miniCssF=e=>{},o.hmrF=()=>"main."+o.h()+".hot-update.json",o.h=()=>"003814735fe73f407286",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="blur-snippet:",o.l=(n,r,i,a)=>{if(e[n])e[n].push(r);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e,t,n,r={},i=o.c,a=[],s=[],c="idle",u=0,l=[];function d(e){c=e;for(var t=[],n=0;n<s.length;n++)t[n]=s[n].call(null,e);return Promise.all(t).then((function(){}))}function h(){0==--u&&d("ready").then((function(){if(0===u){var e=l;l=[];for(var t=0;t<e.length;t++)e[t]()}}))}function p(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return d("check").then(o.hmrM).then((function(n){return n?d("prepare").then((function(){var r=[];return t=[],Promise.all(Object.keys(o.hmrC).reduce((function(e,i){return o.hmrC[i](n.c,n.r,n.m,e,t,r),e}),[])).then((function(){return t=function(){return e?g(e):d("ready").then((function(){return r}))},0===u?t():new Promise((function(e){l.push((function(){e(t())}))}));var t}))})):d(y()?"ready":"idle").then((function(){return null}))}))}function f(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+c+")")})):g(e)}function g(e){e=e||{},y();var r=t.map((function(t){return t(e)}));t=void 0;var o=r.map((function(e){return e.error})).filter(Boolean);if(o.length>0)return d("abort").then((function(){throw o[0]}));var i=d("dispose");r.forEach((function(e){e.dispose&&e.dispose()}));var a,s=d("apply"),c=function(e){a||(a=e)},u=[];return r.forEach((function(e){if(e.apply){var t=e.apply(c);if(t)for(var n=0;n<t.length;n++)u.push(t[n])}})),Promise.all([i,s]).then((function(){return a?d("fail").then((function(){throw a})):n?g(e).then((function(e){return u.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):d("idle").then((function(){return u}))}))}function y(){if(n)return t||(t=[]),Object.keys(o.hmrI).forEach((function(e){n.forEach((function(n){o.hmrI[e](n,t)}))})),n=void 0,!0}o.hmrD=r,o.i.push((function(l){var g,y,b,m,v=l.module,w=function(t,n){var r=i[n];if(!r)return t;var o=function(o){if(r.hot.active){if(i[o]){var s=i[o].parents;-1===s.indexOf(n)&&s.push(n)}else a=[n],e=o;-1===r.children.indexOf(o)&&r.children.push(o)}else console.warn("[HMR] unexpected require("+o+") from disposed module "+n),a=[];return t(o)},s=function(e){return{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(n){t[e]=n}}};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&"e"!==l&&Object.defineProperty(o,l,s(l));return o.e=function(e,n){return function(e){switch(c){case"ready":d("prepare");case"prepare":return u++,e.then(h,h),e;default:return e}}(t.e(e,n))},o}(l.require,l.id);v.hot=(g=l.id,y=v,m={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:b=e!==g,_requireSelf:function(){a=y.parents.slice(),e=b?void 0:g,o(g)},active:!0,accept:function(e,t,n){if(void 0===e)m._selfAccepted=!0;else if("function"==typeof e)m._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)m._acceptedDependencies[e[r]]=t||function(){},m._acceptedErrorHandlers[e[r]]=n;else m._acceptedDependencies[e]=t||function(){},m._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)m._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)m._declinedDependencies[e[t]]=!0;else m._declinedDependencies[e]=!0},dispose:function(e){m._disposeHandlers.push(e)},addDisposeHandler:function(e){m._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=m._disposeHandlers.indexOf(e);t>=0&&m._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":t=[],Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](g,t)})),d("ready");break;case"ready":Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](g,t)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(g)}},check:p,apply:f,status:function(e){if(!e)return c;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:r[g]},e=void 0,m),v.parents=a,v.children=[],a=[],l.require=w})),o.hmrC={},o.hmrI={}})(),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{if("undefined"!=typeof document){var e=[],t=[],n=n=>({dispose:()=>{for(var t=0;t<e.length;t++){var n=e[t];n.parentNode&&n.parentNode.removeChild(n)}e.length=0},apply:()=>{for(var e=0;e<t.length;e++)t[e].rel="stylesheet";t.length=0}});o.hmrC.miniCss=(r,i,a,s,c,u)=>{c.push(n),r.forEach((n=>{var r=o.miniCssF(n),i=o.p+r,a=((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=(a=n[r]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var a;if((o=(a=i[r]).getAttribute("data-href"))===e||o===t)return a}})(r,i);a&&s.push(new Promise(((r,s)=>{var c=((e,t,n,r,i)=>{var a=document.createElement("link");return a.rel="stylesheet",a.type="text/css",o.nc&&(a.nonce=o.nc),a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)r();else{var o=n&&n.type,s=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+s+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=s,a.parentNode&&a.parentNode.removeChild(a),i(c)}},a.href=t,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a),a})(n,i,a,(()=>{c.as="style",c.rel="preload",r()}),s);e.push(a),t.push(c)})))}))}}})(),(()=>{o.b=document.baseURI||self.location.href;var e,t=o.hmrS_jsonp=o.hmrS_jsonp||{792:0};o.f.j=(e,n)=>{var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,o)=>r=t[e]=[n,o]));n.push(r[2]=i);var a=o.p+o.u(e),s=new Error;o.l(a,(n=>{if(o.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+e,e)}};var n,r,i,a,s={};function c(t,n){return e=n,new Promise(((e,n)=>{s[t]=e;var r=o.p+o.hu(t),i=new Error;o.l(r,(e=>{if(s[t]){s[t]=void 0;var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;i.message="Loading hot update chunk "+t+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n(i)}}))}))}function u(e){function s(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),a=i.id,s=i.chain,u=o.c[a];if(u&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(u.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var l=0;l<u.parents.length;l++){var d=u.parents[l],h=o.c[d];if(h){if(h.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([d]),moduleId:a,parentId:d};-1===t.indexOf(d)&&(h.hot._acceptedDependencies[a]?(n[d]||(n[d]=[]),c(n[d],[a])):(delete n[d],t.push(d),r.push({chain:s.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}o.f&&delete o.f.jsonpHmr,n=void 0;var u={},l=[],d={},h=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var p in r)if(o.o(r,p)){var f,g=r[p],y=!1,b=!1,m=!1,v="";switch((f=g?s(p):{type:"disposed",moduleId:p}).chain&&(v="\nUpdate propagation: "+f.chain.join(" -> ")),f.type){case"self-declined":e.onDeclined&&e.onDeclined(f),e.ignoreDeclined||(y=new Error("Aborted because of self decline: "+f.moduleId+v));break;case"declined":e.onDeclined&&e.onDeclined(f),e.ignoreDeclined||(y=new Error("Aborted because of declined dependency: "+f.moduleId+" in "+f.parentId+v));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(f),e.ignoreUnaccepted||(y=new Error("Aborted because "+p+" is not accepted"+v));break;case"accepted":e.onAccepted&&e.onAccepted(f),b=!0;break;case"disposed":e.onDisposed&&e.onDisposed(f),m=!0;break;default:throw new Error("Unexception type "+f.type)}if(y)return{error:y};if(b)for(p in d[p]=g,c(l,f.outdatedModules),f.outdatedDependencies)o.o(f.outdatedDependencies,p)&&(u[p]||(u[p]=[]),c(u[p],f.outdatedDependencies[p]));m&&(c(l,[f.moduleId]),d[p]=h)}r=void 0;for(var w,S=[],_=0;_<l.length;_++){var I=l[_],E=o.c[I];E&&(E.hot._selfAccepted||E.hot._main)&&d[I]!==h&&!E.hot._selfInvalidated&&S.push({module:I,require:E.hot._requireSelf,errorHandler:E.hot._selfAccepted})}return{dispose:function(){var e;i.forEach((function(e){delete t[e]})),i=void 0;for(var n,r=l.slice();r.length>0;){var a=r.pop(),s=o.c[a];if(s){var c={},d=s.hot._disposeHandlers;for(_=0;_<d.length;_++)d[_].call(null,c);for(o.hmrD[a]=c,s.hot.active=!1,delete o.c[a],delete u[a],_=0;_<s.children.length;_++){var h=o.c[s.children[_]];h&&(e=h.parents.indexOf(a))>=0&&h.parents.splice(e,1)}}}for(var p in u)if(o.o(u,p)&&(s=o.c[p]))for(w=u[p],_=0;_<w.length;_++)n=w[_],(e=s.children.indexOf(n))>=0&&s.children.splice(e,1)},apply:function(t){for(var n in d)o.o(d,n)&&(o.m[n]=d[n]);for(var r=0;r<a.length;r++)a[r](o);for(var i in u)if(o.o(u,i)){var s=o.c[i];if(s){w=u[i];for(var c=[],h=[],p=[],f=0;f<w.length;f++){var g=w[f],y=s.hot._acceptedDependencies[g],b=s.hot._acceptedErrorHandlers[g];if(y){if(-1!==c.indexOf(y))continue;c.push(y),h.push(b),p.push(g)}}for(var m=0;m<c.length;m++)try{c[m].call(null,w)}catch(n){if("function"==typeof h[m])try{h[m](n,{moduleId:i,dependencyId:p[m]})}catch(r){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:i,dependencyId:p[m],error:r,originalError:n}),e.ignoreErrored||(t(r),t(n))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:i,dependencyId:p[m],error:n}),e.ignoreErrored||t(n)}}}for(var v=0;v<S.length;v++){var _=S[v],I=_.module;try{_.require(I)}catch(n){if("function"==typeof _.errorHandler)try{_.errorHandler(n,{moduleId:I,module:o.c[I]})}catch(r){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:I,error:r,originalError:n}),e.ignoreErrored||(t(r),t(n))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:I,error:n}),e.ignoreErrored||t(n)}}return l}}}self.webpackHotUpdateblur_snippet=(t,n,i)=>{for(var c in n)o.o(n,c)&&(r[c]=n[c],e&&e.push(c));i&&a.push(i),s[t]&&(s[t](),s[t]=void 0)},o.hmrI.jsonp=function(e,t){r||(r={},a=[],i=[],t.push(u)),o.o(r,e)||(r[e]=o.m[e])},o.hmrC.jsonp=function(e,s,l,d,h,p){h.push(u),n={},i=s,r=l.reduce((function(e,t){return e[t]=!1,e}),{}),a=[],e.forEach((function(e){o.o(t,e)&&void 0!==t[e]?(d.push(c(e,p)),n[e]=!0):n[e]=!1})),o.f&&(o.f.jsonpHmr=function(e,t){n&&o.o(n,e)&&!n[e]&&(t.push(c(e)),n[e]=!0)})},o.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(o.p+o.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))};var l=(e,n)=>{var r,i,[a,s,c]=n,u=0;if(a.some((e=>0!==t[e]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);c&&c(o)}for(e&&e(n);u<a.length;u++)i=a[u],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},d=self.webpackChunkblur_snippet=self.webpackChunkblur_snippet||[];d.forEach(l.bind(null,0)),d.push=l.bind(null,d.push.bind(d))})(),o(514)})();